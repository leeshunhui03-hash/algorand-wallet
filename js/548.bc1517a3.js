"use strict";(self["webpackChunkwallet"]=self["webpackChunkwallet"]||[]).push([[548],{14128:function(e,t){const a=e=>e.replaceAll("+","-").replaceAll("/","_").replaceAll("=","");t.c=a},58284:function(e,t,a){var n=a(92332);class o{constructor(){(0,n.c)(this,"asset-id",0),(0,n.c)(this,"amount",0),(0,n.c)(this,"name",""),(0,n.c)(this,"decimals",0),(0,n.c)(this,"unit-name",""),(0,n.c)(this,"type",""),(0,n.c)(this,"label","")}}t.c=o},19728:function(e,t,a){a.d(t,{eC:function(){return at},OO:function(){return V},ue:function(){return l},Ix:function(){return f}});var n=a(22216);class o{get microAlgos(){return this.amountInMicroAlgos}get algos(){return n["default"].microalgosToAlgos(this.amountInMicroAlgos)}constructor(e){this.amountInMicroAlgos="microAlgos"in e?e.microAlgos:n["default"].algosToMicroalgos(e.algos)}toString(){return`${this.microAlgos.toLocaleString("en-US")} ÂµALGO${1===this.microAlgos?"":"s"}`}valueOf(){return this.microAlgos}static Algos(e){return new o({algos:e})}static MicroAlgos(e){return new o({microAlgos:e})}}Number.prototype.microAlgos=function(){return o.MicroAlgos(this)},Number.prototype.algos=function(){return o.Algos(this)};const l=e=>o.MicroAlgos(e);var c=a(33296);const r=e=>{if("number"===typeof e)return e;if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new s(`Cannot convert ${e} to a Number as it is larger than the maximum safe integer the Number type can hold.`);if(e<BigInt(Number.MIN_SAFE_INTEGER))throw new s(`Cannot convert ${e} to a Number as it is smaller than the minimum safe integer the Number type can hold.`);return Number(e)};class s extends Error{}const i=()=>"undefined"!==typeof process&&null!=process.versions&&null!=process.versions.node,d={error:console.error,warn:console.warn,info:console.info,verbose:()=>{},debug:console.debug},g=(console.error,console.warn,console.info,console.error,console.warn,console.info,console.trace,console.debug,console.error,console.warn,{error:function(e,...t){},warn:function(e,...t){},info:function(e,...t){},verbose:function(e,...t){},debug:function(e,...t){}});class p{get populateAppCallResources(){return this.config.populateAppCallResources}get logger(){return this.config.logger}get debug(){return this.config.debug}get projectRoot(){return this.config.projectRoot}get traceAll(){return this.config.traceAll}get traceBufferSizeMb(){return this.config.traceBufferSizeMb}get maxSearchDepth(){return this.config.maxSearchDepth}getLogger(e){return e?g:this.logger}withDebug(e){const t=this.config.debug;try{this.config.debug=!0,e()}finally{this.config.debug=t}}constructor(){this.config={logger:d,debug:!1,projectRoot:null,traceAll:!1,traceBufferSizeMb:256,maxSearchDepth:10,populateAppCallResources:!1},i()&&this.configureProjectRoot()}async configureProjectRoot(){if(!i())throw new Error("`configureProjectRoot` can only be called in Node.js environment.");const e=await a.e(436).then(a.t.bind(a,91436,19)),t=await a.e(504).then(a.t.bind(a,71504,19)),n=await a.e(504).then(a.t.bind(a,71504,19)).then((async e=>e.dirname(await a.e(728).then(a.t.bind(a,79728,19)).then((e=>e.fileURLToPath("file:///home/runner/work/wallet/wallet/node_modules/@algorandfoundation/algokit-utils/types/config.mjs"))))));if(!n)return;let o=t.resolve(n);for(let a=0;a<this.config.maxSearchDepth;a++){if(e.existsSync(`${o}/.algokit.toml`)){this.config.projectRoot=o;break}o=t.dirname(o)}}configure(e){this.config={...this.config,...e}}}const u=new p;var m=n["default"].modelsv2;async function C(e,t){const a=e.buildGroup(),o=a.map((e=>n["default"].encodeUnsignedSimulateTransaction(e.txn))),l=new m.SimulateRequest({allowEmptySignatures:!0,allowMoreLogging:!0,execTraceConfig:new m.SimulateTraceConfig({enable:!0,scratchChange:!0,stackChange:!0,stateChange:!0}),txnGroups:[new m.SimulateRequestTransactionGroup({txns:o.map((e=>n["default"].decodeObj(e)))})]}),c=await t.simulateTransactions(l).do();return c}const Z=".trace.avm.json",b="debug_traces";async function y({atc:e,projectRoot:t,algod:n,bufferSizeMb:o}){if(!i())throw new Error("Sourcemaps can only be persisted in Node.js environment.");const l=await a.e(60).then(a.t.bind(a,49060,19)),c=await a.e(504).then(a.t.bind(a,71504,19));try{const a=e.clone(),s=await C(a,n),i=s.txnGroups,d=i.reduce(((e,t)=>{const a=t.txnResults[0].txnResult.txn.txn.type;return e[a]=(e[a]||0)+1,e}),{}),g=Object.entries(d).map((([e,t])=>`${t}#${e}`)).join("_"),p=(new Date).toISOString().replace(/[:.]/g,""),u=c.join(t,b),m=`${p}_lr${s.lastRound}_${g}${Z}`,y=c.join(u,m);try{await l.promises.access(c.dirname(y))}catch(r){const e=r;if("ENOENT"!==e.code)throw e;await l.promises.mkdir(c.dirname(y),{recursive:!0})}let h=(await Promise.all((await l.promises.readdir(u)).map((async e=>(await l.promises.stat(c.join(u,e))).size)))).reduce(((e,t)=>e+t),0);if(h>1024*o*1024){const e=(await l.promises.readdir(u)).map((async e=>{const t=await l.promises.stat(c.join(u,e));return{file:e,mtime:t.mtime}})),t=await Promise.all(e);t.sort(((e,t)=>e.mtime.getTime()-t.mtime.getTime()));while(h>1024*o*1024){const t=e.shift();if(t){const e=await t,a=await l.promises.stat(c.join(u,e.file));h-=a.size,await l.promises.unlink(c.join(u,e.file))}}}return await l.promises.writeFile(y,JSON.stringify(s.get_obj_for_encoding(),null,2)),s}catch(r){const e=r instanceof Error?r:new Error(String(r));throw u.getLogger().error(`Failed to simulate and persist avm traces: ${e.stack??e.message??e}.`),e}}var h=n["default"].AtomicTransactionComposer,W=n["default"].modelsv2;const I=8,G=4;function X(e){if(null!=e&&"undefined"!==typeof e){if("object"===typeof e&&e.constructor===Uint8Array)return e;if("object"===typeof e&&"dAppName"in e){const t=`${e.dAppName}:${e.format}${"string"===typeof e.data?e.data:JSON.stringify(e.data)}`,a=new TextEncoder;return a.encode(t)}{const t="string"===typeof e?e:JSON.stringify(e),a=new TextEncoder;return a.encode(t)}}}function R(e){if(null!==e&&"undefined"!==typeof e){if("object"===typeof e&&e.constructor===Uint8Array){if(0===e.length||e.length>32)throw new Error(`Received invalid lease; expected something with length between 1 and 32, but received bytes with length ${e.length}`);if(32===e.length)return e;const t=new Uint8Array(32);return t.set(e,0),t}if("string"===typeof e){if(0===e.length||e.length>32)throw new Error(`Received invalid lease; expected something with length between 1 and 32, but received '${e}' with length ${e.length}`);const t=new TextEncoder,a=new Uint8Array(32);return a.set(t.encode(e),0),a}throw new Error("Unknown lease type received of "+typeof e)}}const v=function(e){return"string"===typeof e?e:"addr"in e?e.addr:e.address()},Y=e=>{const t=new Map,a=function(a){return(t.has(a)||t.set(a,e.call(this,a)))&&t.get(a)};return a.cache=t,a},V=async(e,t)=>{if("txn"in e)return e;if(void 0===t)throw new Error("Default sender must be provided when passing in a transaction object that does not contain its own signer");return e instanceof Promise?{txn:(await e).transaction,signer:B(t)}:"transaction"in e?{txn:e.transaction,signer:B(e.signer)}:{txn:e,signer:B(t)}},B=Y((function(e){return"signer"in e?e.signer:"lsig"in e?n["default"].makeLogicSigAccountTransactionSigner(e):n["default"].makeBasicAccountTransactionSigner(e)})),A=async(e,t)=>"sk"in t?e.signTxn(t.sk):"lsig"in t?n["default"].signLogicSigTransactionObject(e,t).blob:"sign"in t?t.sign(e):(await t.signer([e],[0]))[0],J=async function(e,t){const{transaction:a,from:o,sendParams:l}=e,{skipSending:c,skipWaiting:r,fee:s,maxFee:i,suppressLog:d,maxRoundsToWaitForConfirmation:g,atc:p}=l??{};if(H(a,{fee:s,maxFee:i}),p)return p.addTransaction({txn:a,signer:B(o)}),{transaction:a};if(c)return{transaction:a};let m=a;const C=l?.populateAppCallResources??u.populateAppCallResources;if(m.type===n["default"].TransactionType.appl&&C){const e=new h;e.addTransaction({txn:m,signer:B(o)});const a=await N(e,t);m=a.buildGroup()[0].txn}const Z=await A(m,o);let b;return await t.sendRawTransaction(Z).do(),u.getLogger(d).verbose(`Sent transaction ID ${m.txID()} ${m.type} from ${v(o)}`),r||(b=await w(m.txID(),g??5,t)),{transaction:m,confirmation:b}};async function F(e,t){const a=new n["default"].modelsv2.SimulateRequest({txnGroups:[],allowUnnamedResources:!0,allowEmptySignatures:!0}),o=e.clone();o["transactions"].forEach((e=>{e.signer=n["default"].makeEmptyTransactionSigner()}));const l=await o.simulate(t,a),c=l.simulateResponse.txnGroups[0];if(c.failureMessage)throw Error(`Error during resource population simulation in transaction ${c.failedAt}: ${c.failureMessage}`);return{group:c.unnamedResourcesAccessed,txns:c.txnResults.map((e=>e.unnamedResourcesAccessed))}}async function N(e,t){const a=await F(e,t),o=e.buildGroup();a.txns.forEach(((e,t)=>{if(void 0===e)return;if(e.boxes||e.extraBoxRefs)throw Error("Unexpected boxes at the transaction level");if(e.appLocals)throw Error("Unexpected app local at the transaction level");if(e.assetHoldings)throw Error("Unexpected asset holding at the transaction level");e.accounts?.forEach((e=>{o[t].txn.appAccounts?.push(n["default"].decodeAddress(e))})),e.apps?.forEach((e=>{o[t].txn.appForeignApps?.push(Number(e))})),e.assets?.forEach((e=>{o[t].txn.appForeignAssets?.push(Number(e))}));const a=o[t].txn.appAccounts?.length||0;if(a>G)throw Error(`Account reference limit of ${G} exceeded in transaction ${t}`);const l=o[t].txn.appForeignAssets?.length||0,c=o[t].txn.appForeignApps?.length||0,r=o[t].txn.boxes?.length||0;if(a+l+c+r>I)throw Error(`Resource reference limit of ${I} exceeded in transaction ${t}`)}));const l=(e,t,a)=>{if("assetHolding"===a||"appLocal"===a){const{account:o}=t,l=e=>{if(e.txn.type!==n["default"].TransactionType.appl)return!1;const t=e.txn.appAccounts?.length||0,a=e.txn.appForeignAssets?.length||0,o=e.txn.appForeignApps?.length||0,l=e.txn.boxes?.length||0;return t+a+o+l<I};let c=e.findIndex((e=>!!l(e)&&(e.txn.appAccounts?.map((e=>n["default"].encodeAddress(e.publicKey))).includes(o)||e.txn.appForeignApps?.map((e=>n["default"].getApplicationAddress(e))).includes(o)||Object.values(e.txn).map((e=>JSON.stringify(e))).includes(JSON.stringify(n["default"].decodeAddress(o))))));if(c>-1){if("assetHolding"===a){const{asset:a}=t;e[c].txn.appForeignAssets?.push(Number(a))}else{const{app:a}=t;e[c].txn.appForeignApps?.push(Number(a))}return}if(c=e.findIndex((e=>{if(!l(e))return!1;if((e.txn.appAccounts?.length||0)>=G)return!1;if("assetHolding"===a){const{asset:a}=t;return e.txn.appForeignAssets?.includes(Number(a))}{const{app:a}=t;return e.txn.appForeignApps?.includes(Number(a))||e.txn.appIndex===Number(a)}})),c>-1){const{account:a}=t;return void e[c].txn.appAccounts?.push(n["default"].decodeAddress(a))}}const o=e.findIndex((e=>{if(e.txn.type!==n["default"].TransactionType.appl)return!1;const t=e.txn.appAccounts?.length||0;if("account"===a)return t<G;const o=e.txn.appForeignAssets?.length||0,l=e.txn.appForeignApps?.length||0,c=e.txn.boxes?.length||0;return"assetHolding"===a||"appLocal"===a?t+o+l+c<I-1&&t<G:t+o+l+c<I}));if(-1===o)throw Error("No more transactions below reference limit. Add another app call to the group.");if("account"===a)e[o].txn.appAccounts?.push(n["default"].decodeAddress(t));else if("app"===a)e[o].txn.appForeignApps?.push(Number(t));else if("box"===a){const{app:a,name:n}=t;e[o].txn.boxes?.push({appIndex:Number(a),name:n})}else if("assetHolding"===a){const{asset:a,account:l}=t;e[o].txn.appForeignAssets?.push(Number(a)),e[o].txn.appAccounts?.push(n["default"].decodeAddress(l))}else if("appLocal"===a){const{app:a,account:l}=t;e[o].txn.appAccounts?.push(n["default"].decodeAddress(l)),e[o].txn.appForeignApps?.push(Number(a))}else"asset"===a&&e[o].txn.appForeignAssets?.push(Number(t))},c=a.group;if(c&&(c.appLocals?.forEach((e=>{l(o,e,"appLocal"),c.accounts=c.accounts?.filter((t=>t!==e.account)),c.apps=c.apps?.filter((t=>BigInt(t)!==BigInt(e.app)))})),c.assetHoldings?.forEach((e=>{l(o,e,"assetHolding"),c.accounts=c.accounts?.filter((t=>t!==e.account)),c.assets=c.assets?.filter((t=>BigInt(t)!==BigInt(e.asset)))})),c.accounts?.forEach((e=>{l(o,e,"account")})),c.boxes?.forEach((e=>{l(o,e,"box")})),c.assets?.forEach((e=>{l(o,e,"asset")})),c.apps?.forEach((e=>{l(o,e,"app")})),c.extraBoxRefs))for(let s=0;s<c.extraBoxRefs;s+=1){const e=new n["default"].modelsv2.BoxReference({app:0,name:new Uint8Array(0)});l(o,e,"box")}const r=new n["default"].AtomicTransactionComposer;return o.forEach((e=>{e.txn.group=void 0,r.addTransaction(e)})),r["methodCalls"]=e["methodCalls"],r}const f=async function(e,t){const{atc:a,sendParams:o}=e;let l;l=a;try{const e=o?.populateAppCallResources??u.populateAppCallResources;e&&(l=await N(a,t));const r=l.buildGroup(),s=r.map((e=>e.txn));let i;s.length>1&&(i=s[0].group?c.Buffer.from(s[0].group).toString("base64"):"",u.getLogger(o?.suppressLog).verbose(`Sending group of ${s.length} transactions (${i})`,{transactionsToSend:s}),u.getLogger(o?.suppressLog).debug(`Transaction IDs (${i})`,s.map((e=>e.txID())))),u.debug&&u.projectRoot&&u.traceAll&&await y({atc:l,projectRoot:u.projectRoot,algod:t,bufferSizeMb:u.traceBufferSizeMb});const d=await l.execute(t,o?.maxRoundsToWaitForConfirmation??5);let g;return s.length>1?u.getLogger(o?.suppressLog).verbose(`Group transaction (${i}) sent with ${s.length} transactions`):u.getLogger(o?.suppressLog).verbose(`Sent transaction ID ${s[0].txID()} ${s[0].type} from ${n["default"].encodeAddress(s[0].from.publicKey)}`),o?.skipWaiting||(g=await Promise.all(s.map((async e=>W.PendingTransactionResponse.from_obj_for_encoding(await t.pendingTransactionInformation(e.txID()).do()))))),{groupId:i,confirmations:g,txIds:s.map((e=>e.txID())),transactions:s,returns:d.methodResults.map((e=>({decodeError:e.decodeError,returnValue:e.returnValue,rawReturnValue:e.rawReturnValue})))}}catch(r){if(delete r.response?.headers,u.debug&&"object"===typeof r){let e;if(r.traces=[],u.logger.error("Received error executing Atomic Transaction Composer and debug flag enabled; attempting simulation to get more information",r),e=u.debug&&u.projectRoot&&!u.traceAll?await y({atc:l,projectRoot:u.projectRoot,algod:t,bufferSizeMb:u.traceBufferSizeMb}):await C(l,t),e&&e.txnGroups[0].failedAt)for(const t of e.txnGroups[0].txnResults)r.traces.push({trace:t.execTrace?.get_obj_for_encoding(),appBudget:t.appBudgetConsumed,logicSigBudget:t.logicSigBudgetConsumed,logs:t.txnResult.logs,message:e.txnGroups[0].failureMessage})}else u.logger.error("Received error executing Atomic Transaction Composer, for more information enable the debug flag",r);throw r}};const w=async function(e,t,a){if(t<0)throw new Error(`Invalid timeout, received ${t}, expected > 0`);const n=W.NodeStatusResponse.from_obj_for_encoding(await a.status().do());if(void 0===n)throw new Error("Unable to get node status");const o=BigInt(n.lastRound)+1n;let l=o;while(l<o+BigInt(t)){try{const t=W.PendingTransactionResponse.from_obj_for_encoding(await a.pendingTransactionInformation(e).do());if(void 0!==t){const a=t.confirmedRound;if(a&&a>0)return t;{const a=t.poolError;if(null!=a&&a.length>0)throw new Error(`Transaction ${e} was rejected; pool error: ${a}`)}}}catch(c){if("URLTokenBaseHTTPError"===c.name){l++;continue}}await a.statusAfterBlock(r(l)).do(),l++}throw new Error(`Transaction ${e} not confirmed after ${t} rounds`)};function L(e,t){if(!e.flatFee){if(e.fee>t.microAlgos)throw new Error(`Cancelled transaction due to high network congestion fees. Algorand suggested fees would cause this transaction to cost ${e.fee} ÂµALGOs. Cap for this transaction is ${t.microAlgos} ÂµALGOs.`);e.fee>n["default"].ALGORAND_MIN_TX_FEE&&u.logger.warn(`Algorand network congestion fees are in effect. This transaction will incur a fee of ${e.fee} ÂµALGOs.`),e.flatFee=!0}}function H(e,t){const{fee:a,maxFee:n}=t;return a&&(e.fee=a.microAlgos,e.flatFee=!0),void 0!==n&&L(e,n),e}async function Q(e,t){return e?{...e}:await t.getTransactionParams().do()}function K(e){try{return e.clone().buildGroup()}catch{return[]}}const k="TMPL_UPDATABLE",z="TMPL_DELETABLE",S="ALGOKIT_DEPLOYER",x=2048;new Uint8Array([21,31,124,117]);var M,U;(function(e){e[e["Fail"]=0]="Fail",e[e["UpdateApp"]=1]="UpdateApp",e[e["ReplaceApp"]=2]="ReplaceApp",e[e["AppendApp"]=3]="AppendApp"})(M||(M={})),function(e){e[e["Fail"]=0]="Fail",e[e["ReplaceApp"]=1]="ReplaceApp",e[e["AppendApp"]=2]="AppendApp"}(U||(U={}));var j=n["default"].ABIMethod,E=n["default"].AtomicTransactionComposer,T=n["default"].modelsv2,D=n["default"].OnApplicationComplete,O=n["default"].SourceMap;async function P(e,t){const{from:a,approvalProgram:o,clearStateProgram:l,schema:c,note:r,transactionParams:s,args:i,onCompleteAction:d,...g}=e,p="string"===typeof o?await ue(o,t):void 0,m=p?p.compiledBase64ToBytes:o,C="string"===typeof l?await ue(l,t):void 0,Z=C?C.compiledBase64ToBytes:l;if(i&&i.method){const e=$(g),o=K(e);if(e.addMethodCall({appID:0,approvalProgram:m,clearProgram:Z,numLocalInts:c.localInts,numLocalByteSlices:c.localByteSlices,numGlobalInts:c.globalInts,numGlobalByteSlices:c.globalByteSlices,extraPages:c.extraPages??Math.floor((m.length+Z.length)/x),onComplete:q(d),suggestedParams:H(await Q(s,t),g),note:X(r),...await ie(i,a)}),g.skipSending){const t=e.clone().buildGroup();return{transaction:t[t.length-1].txn,transactions:t.slice(o.length).map((e=>e.txn)),appId:0,appAddress:"",compiledApproval:p,compiledClear:C}}const l=await f({atc:e,sendParams:g},t),b=l.confirmations?l.confirmations[l.confirmations?.length-1]:void 0;if(b){const e=b.applicationIndex;return u.getLogger(g.suppressLog).debug(`Created app ${e} from creator ${v(a)}`),{transactions:l.transactions,confirmations:l.confirmations,return:b?te(i,b):void 0,transaction:l.transactions[l.transactions.length-1],confirmation:b,appId:e,appAddress:n["default"].getApplicationAddress(e),compiledApproval:p,compiledClear:C}}return{transactions:l.transactions,confirmations:l.confirmations,return:b?te(i,b):void 0,transaction:l.transactions[l.transactions.length-1],confirmation:b,appId:0,appAddress:"",compiledApproval:p,compiledClear:C}}{const e=n["default"].makeApplicationCreateTxnFromObject({approvalProgram:m,clearProgram:Z,numLocalInts:c.localInts,numLocalByteSlices:c.localByteSlices,numGlobalInts:c.globalInts,numGlobalByteSlices:c.globalByteSlices,extraPages:c.extraPages??Math.floor((m.length+Z.length)/x),onComplete:q(d),suggestedParams:await Q(s,t),from:v(a),note:X(r),...se(i),rekeyTo:i?.rekeyTo?"string"===typeof i.rekeyTo?i.rekeyTo:v(i.rekeyTo):void 0}),{confirmation:o}=await J({transaction:e,from:a,sendParams:g},t);if(o){const t=o.applicationIndex;return u.getLogger(g.suppressLog).debug(`Created app ${t} from creator ${v(a)}`),{transaction:e,transactions:[e],confirmation:o,confirmations:o?[o]:void 0,appId:t,appAddress:n["default"].getApplicationAddress(t),return:te(i,o),compiledApproval:p,compiledClear:C}}return{transaction:e,transactions:[e],appId:0,appAddress:"",compiledApproval:p,compiledClear:C}}}async function _(e,t){const{appId:a,from:o,approvalProgram:l,clearStateProgram:c,note:s,transactionParams:i,args:d,...g}=e,p="string"===typeof l?await ue(l,t):void 0,m=p?p.compiledBase64ToBytes:l,C="string"===typeof c?await ue(c,t):void 0,Z=C?C.compiledBase64ToBytes:c;if(u.getLogger(g.suppressLog).debug(`Updating app ${a}`),d&&d.method){const e=$(g),n=K(e);if(e.addMethodCall({appID:r(a),onComplete:D.UpdateApplicationOC,approvalProgram:m,clearProgram:Z,suggestedParams:H(await Q(i,t),g),note:X(s),...await ie(d,o)}),g.skipSending){const t=e.clone().buildGroup();return{transaction:t[t.length-1].txn,transactions:t.slice(n.length).map((e=>e.txn))}}const l=await f({atc:e,sendParams:g},t),c=l.confirmations?l.confirmations[l.confirmations?.length-1]:void 0;return{transactions:l.transactions,confirmations:l.confirmations,return:c?te(d,c):void 0,transaction:l.transactions[l.transactions.length-1],confirmation:c}}{const e=n["default"].makeApplicationUpdateTxnFromObject({appIndex:r(a),approvalProgram:m,clearProgram:Z,suggestedParams:await Q(i,t),from:v(o),note:X(s),...se(d),rekeyTo:d?.rekeyTo?"string"===typeof d.rekeyTo?d.rekeyTo:v(d.rekeyTo):void 0}),l=await J({transaction:e,from:o,sendParams:g},t);return{...l,transactions:[l.transaction],confirmations:l.confirmation?[l.confirmation]:void 0,return:te(d,l.confirmation),compiledApproval:p,compiledClear:C}}}function $(e){return e.atc&&(e.skipSending=!0),e.atc=e.atc??new E,e.atc}function q(e){switch(e){case void 0:case"no_op":case D.NoOpOC:return D.NoOpOC;case"opt_in":case D.OptInOC:return D.OptInOC;case"close_out":case D.CloseOutOC:return D.CloseOutOC;case"clear_state":case D.ClearStateOC:return D.ClearStateOC;case"update_application":case D.UpdateApplicationOC:return D.UpdateApplicationOC;case"delete_application":case D.DeleteApplicationOC:return D.DeleteApplicationOC}}async function ee(e,t){const{appId:a,callType:o,from:l,args:c,note:s,transactionParams:i,...d}=e;if(c&&c.method){const e=$(d),n=K(e);if(e.addMethodCall({appID:r(a),suggestedParams:H(await Q(i,t),d),note:X(s),onComplete:q(o),...await ie(c,l)}),d.skipSending){const t=e.clone().buildGroup();return{transaction:t[t.length-1].txn,transactions:t.slice(n.length).map((e=>e.txn))}}const g=await f({atc:e,sendParams:d},t),p=g.confirmations?g.confirmations[g.confirmations?.length-1]:void 0;return{transactions:g.transactions,confirmations:g.confirmations,return:p?te(c,p):void 0,transaction:g.transactions[g.transactions.length-1],confirmation:p}}const g={appIndex:r(a),from:v(l),suggestedParams:await Q(i,t),...se(c),note:X(s),rekeyTo:c?.rekeyTo?"string"===typeof c.rekeyTo?c.rekeyTo:v(c.rekeyTo):void 0};let p;switch(q(o)){case D.OptInOC:p=n["default"].makeApplicationOptInTxnFromObject(g);break;case D.ClearStateOC:p=n["default"].makeApplicationClearStateTxnFromObject(g);break;case D.CloseOutOC:p=n["default"].makeApplicationCloseOutTxnFromObject(g);break;case D.DeleteApplicationOC:p=n["default"].makeApplicationDeleteTxnFromObject(g);break;case D.NoOpOC:p=n["default"].makeApplicationNoOpTxnFromObject(g);break;default:throw new Error(`Received unexpected call type ${o}`)}const u=await J({transaction:p,from:l,sendParams:d},t);return{...u,transactions:[u.transaction],confirmations:u.confirmation?[u.confirmation]:void 0,return:te(c,u.confirmation)}}function te(e,t){if(!e||!e.method)return;const a="txnCount"in e.method?e.method:new j(e.method);if("void"!==a.returns.type&&t){const e={txID:"",method:a,rawReturnValue:new Uint8Array},n=E.parseMethodResponse(a,e,t);return n.decodeError?{rawReturnValue:void 0,returnValue:void 0,decodeError:n.decodeError}:{rawReturnValue:n.rawReturnValue,returnValue:n.returnValue,decodeError:void 0}}}async function ae(e,t){const a=await pe(e,t);if(!a.params||!a.params.globalState)throw new Error("Couldn't find global state");return re(a.params.globalState)}async function ne(e,t,a){const n="string"===typeof t?t:v(t),o=T.AccountApplicationResponse.from_obj_for_encoding(await a.accountApplicationInformation(n,r(e)).do());if(!o.appLocalState?.keyValue)throw new Error("Couldn't find local state");return re(o.appLocalState.keyValue)}async function oe(e,t){const a=await t.getApplicationBoxes(r(e)).do();return a.boxes.map((e=>({nameRaw:e.name,nameBase64:c.Buffer.from(e.name).toString("base64"),name:c.Buffer.from(e.name).toString("utf-8")})))}async function le(e,t,a){const n="string"===typeof t?new Uint8Array(c.Buffer.from(t,"utf-8")):"name"in t?t.nameRaw:t,o=await a.getApplicationBoxByName(r(e),n).do();return o.value}async function ce(e,t){const{appId:a,boxName:n,type:o}=e,l=await le(a,n,t);return o.decode(l)}function re(e){const t={};for(const a of e){const e=a.key,n=c.Buffer.from(e,"base64"),o=n.toString("utf-8"),l=a.value,r="action"in l?l.action:l.type;let s,i;switch(r){case 1:s=l.bytes??"",i=c.Buffer.from(s,"base64"),t[o]={keyRaw:n,keyBase64:e,valueRaw:new Uint8Array(i),valueBase64:s,value:i.toString("utf-8")};break;case 2:{const a=l.uint??0;t[o]={keyRaw:n,keyBase64:e,value:a};break}default:throw new Error(`Received unknown state data type of ${r}`)}}return t}function se(e){if(!e)return;const t=new TextEncoder;return{accounts:e?.accounts?.map(ge),appArgs:e?.appArgs?.map((e=>"string"===typeof e?t.encode(e):e)),boxes:e.boxes?.map(de),foreignApps:e?.apps,foreignAssets:e?.assets,lease:R(e?.lease)}}async function ie(e,t){const a=B(t),n=await Promise.all(("methodArgs"in e?e.methodArgs:e)?.map((async(e,t)=>{if(void 0===e)throw new Error(`Argument at position ${t} does not have a value`);return"object"!==typeof e||"txn"in e?e:e instanceof Promise?{txn:(await e).transaction,signer:a}:"transaction"in e?{txn:e.transaction,signer:"signer"in e?B(e.signer):a}:"txID"in e?{txn:e,signer:a}:e})));return{method:"txnCount"in e.method?e.method:new j(e.method),sender:v(t),signer:a,boxes:e.boxes?.map(de),lease:R(e.lease),appForeignApps:e.apps,appForeignAssets:e.assets,appAccounts:e.accounts?.map(ge),methodArgs:n,rekeyTo:e?.rekeyTo?"string"===typeof e.rekeyTo?e.rekeyTo:v(e.rekeyTo):void 0}}function de(e){const t=new TextEncoder;if("object"===typeof e&&"appIndex"in e)return e;const a="object"===typeof e&&"appId"in e?e:{appId:0,name:e};return{appIndex:a.appId,name:"string"===typeof a.name?t.encode(a.name):"length"in a.name?a.name:n["default"].decodeAddress(v(a.name)).publicKey}}function ge(e){return"string"===typeof e?e:n["default"].encodeAddress(e.publicKey)}async function pe(e,t){return T.Application.from_obj_for_encoding(await t.getApplicationByID(r(e)).do())}async function ue(e,t){const a=await t.compile(e).sourcemap(!0).do();return{teal:e,compiled:a.result,compiledHash:a.hash,compiledBase64ToBytes:new Uint8Array(c.Buffer.from(a.result,"base64")),sourceMap:new O(a["sourcemap"])}}const me=e=>"getSignature"in e?e.getSignature():new j(e).getSignature(),Ce=1e3;async function Ze(e,t,a=void 0,n){return await ye((e=>{if("message"in e)throw{status:404,...e};return e.applications}),(o=>{let l=e.lookupAccountCreatedApplications(t).includeAll(a).limit(n??Ce);return o&&(l=l.nextToken(o)),l}))}async function be(e,t,a){let n=0;const o=await ye((e=>{if("message"in e)throw{status:404,...e};return e["current-round"]>n&&(n=e["current-round"]),e.transactions}),(n=>{let o=t(e.searchForTransactions()).limit(a??Ce);return n&&(o=o.nextToken(n)),o}));return{"current-round":n,"next-token":"",transactions:o}}async function ye(e,t){const a=[];let n;while(1){const o=t(n),l=await o.do(),c=e(l);if(null==c||0===c.length)break;if(a.push(...c),n=l["next-token"],!n)break}return a}var he=n["default"].AtomicTransactionComposer,We=n["default"].getApplicationAddress,Ie=n["default"].modelsv2,Ge=n["default"].TransactionType;async function Xe(e,t,a){const{metadata:n,deployTimeParams:o,onSchemaBreak:l,onUpdate:c,existingDeployments:r,createArgs:s,updateArgs:i,deleteArgs:d,createOnCompleteAction:g,...p}=e;if(r&&r.creator!==v(p.from))throw new Error(`Received invalid existingDeployments value for creator ${r.creator} when attempting to deploy for creator ${p.from}`);if(!r&&!a)throw new Error("Didn't receive an indexer client, but also didn't receive an existingDeployments cache - one of them must be provided");u.getLogger(p.suppressLog).info(`Idempotently deploying app "${n.name}" from creator ${v(p.from)} using ${p.approvalProgram.length} bytes of teal code and ${p.clearStateProgram.length} bytes of teal code`);const m="string"===typeof p.approvalProgram?await Ae(p.approvalProgram,t,o,n):void 0;p.approvalProgram=m?m.compiledBase64ToBytes:p.approvalProgram;const C="string"===typeof p.clearStateProgram?await Ae(p.clearStateProgram,t,o):void 0;p.clearStateProgram=C?C.compiledBase64ToBytes:p.clearStateProgram;const Z=r??await ve(p.from,a),b=async e=>{const a=await P({...p,onCompleteAction:g,args:s,note:Ye(n),atc:e,skipWaiting:!1},t);return{transaction:a.transaction,transactions:a.transactions,confirmation:a.confirmation,confirmations:a.confirmations,return:a.return,appId:a.appId,appAddress:a.appAddress,createdMetadata:n,createdRound:Number(a.confirmation?.confirmedRound),updatedRound:Number(a.confirmation?.confirmedRound),...n,deleted:!1,operationPerformed:"create",compiledApproval:m,compiledClear:C}},y=Z.apps[n.name];if(!y||y.deleted)return u.getLogger(p.suppressLog).info(`App ${n.name} not found in apps created by ${v(p.from)}; deploying app with version ${n.version}.`),await b();u.getLogger(p.suppressLog).info(`Existing app ${n.name} found by creator ${v(p.from)}, with app id ${y.appId} and version ${y.version}.`);const h=await pe(y.appId,t),W=Buffer.from(h.params.approvalProgram).toString("base64"),I=Buffer.from(h.params.clearStateProgram).toString("base64"),G=h.params.globalStateSchema,X=h.params.localStateSchema,R=new Ie.ApplicationStateSchema({numByteSlice:p.schema.globalByteSlices,numUint:p.schema.globalInts}),Y=new Ie.ApplicationStateSchema({numByteSlice:p.schema.localByteSlices,numUint:p.schema.localInts}),V=Buffer.from(p.approvalProgram).toString("base64"),B=Buffer.from(p.clearStateProgram).toString("base64"),A=V!==W||B!==I,J=Re(G,R)||Re(X,Y),F=async()=>{const e=new he;u.getLogger(p.suppressLog).info(`Deploying a new ${n.name} app for ${v(p.from)}; deploying app with version ${n.version}.`);const{transaction:a}=await b(e),o=e.clone().buildGroup();u.getLogger(p.suppressLog).warn(`Deleting existing ${n.name} app with id ${y.appId} from ${v(p.from)} account.`);const{transaction:l}=await ee({appId:y.appId,callType:"delete_application",from:p.from,args:d,transactionParams:p.transactionParams,suppressLog:p.suppressLog,skipSending:!0,atc:e},t),{transactions:c,confirmations:r,returns:s}=await f({atc:e,sendParams:{maxRoundsToWaitForConfirmation:p.maxRoundsToWaitForConfirmation,skipWaiting:!1,suppressLog:!0}},t),i=r[o.length-1],g=r[r.length-1],Z=i.applicationIndex;return u.getLogger(p.suppressLog).warn(`Sent transactions ${a.txID()} to create app with id ${Z} and ${l.txID()} to delete app with id ${y.appId} from ${v(p.from)} account.`),{transaction:a,transactions:c,confirmation:i,confirmations:r,return:s?.[0],deleteReturn:s?.[1],appId:Z,appAddress:We(Z),createdMetadata:n,createdRound:Number(i.confirmedRound),updatedRound:Number(i.confirmedRound),...n,deleted:!1,deleteResult:{transaction:l,confirmation:g},operationPerformed:"replace",compiledApproval:m,compiledClear:C}},N=async()=>{u.getLogger(p.suppressLog).info(`Updating existing ${n.name} app for ${v(p.from)} to version ${n.version}.`);const e=await _({appId:y.appId,from:p.from,args:i,note:Ye(n),approvalProgram:p.approvalProgram,clearStateProgram:p.clearStateProgram,transactionParams:p.transactionParams,suppressLog:p.suppressLog,skipSending:!1,skipWaiting:!1},t);return{transaction:e.transaction,transactions:e.transactions,confirmation:e.confirmation,confirmations:e.confirmations,return:e.return,appId:y.appId,appAddress:y.appAddress,createdMetadata:y.createdMetadata,createdRound:y.createdRound,updatedRound:Number(e.confirmation?.confirmedRound),...n,deleted:!1,operationPerformed:"update",compiledApproval:m,compiledClear:C}};if(J){if(u.getLogger(p.suppressLog).warn(`Detected a breaking app schema change in app ${y.appId}:`,{from:{global:G,local:X},to:{global:R,local:Y}}),void 0===l||"fail"===l||l===U.Fail)throw new Error("Schema break detected and onSchemaBreak=OnSchemaBreak.Fail, stopping deployment. If you want to try deleting and recreating the app then re-run with onSchemaBreak=OnSchemaBreak.ReplaceApp");return"append"===l||l===U.AppendApp?(u.getLogger(p.suppressLog).info("onSchemaBreak=AppendApp, will attempt to create a new app"),await b()):(y.deletable?u.getLogger(p.suppressLog).info("App is deletable and onSchemaBreak=ReplaceApp, will attempt to create new app and delete old app"):u.getLogger(p.suppressLog).info("App is not deletable but onSchemaBreak=ReplaceApp, will attempt to delete app, delete will most likely fail"),await F())}if(A){if(u.getLogger(p.suppressLog).info(`Detected a TEAL update in app ${y.appId} for creator ${v(p.from)}`),void 0===c||"fail"===c||c===M.Fail)throw new Error("Update detected and onUpdate=Fail, stopping deployment. If you want to try deleting and recreating the app then re-run with onUpdate=UpdateApp");if("append"===c||c===M.AppendApp)return u.getLogger(p.suppressLog).info("onUpdate=AppendApp, will attempt to create a new app"),await b();if("update"===c||c===M.UpdateApp)return y.updatable?u.getLogger(p.suppressLog).info("App is updatable and onUpdate=UpdateApp, updating app..."):u.getLogger(p.suppressLog).warn("App is not updatable but onUpdate=UpdateApp, will attempt to update app, update will most likely fail"),await N();if("replace"===c||c===M.ReplaceApp)return y.deletable?u.getLogger(p.suppressLog).warn("App is deletable and onUpdate=ReplaceApp, creating new app and deleting old app..."):u.getLogger(p.suppressLog).warn("App is not deletable and onUpdate=ReplaceApp, will attempt to create new app and delete old app, delete will most likely fail"),await F()}return u.getLogger(p.suppressLog).debug("No detected changes in app, nothing to do."),{...y,operationPerformed:"nothing",compiledApproval:m,compiledClear:C}}function Re(e,t){return e.numByteSlice<t.numByteSlice||e.numUint<t.numUint}async function ve(e,t){const a={},n="string"!==typeof e?v(e):e,o=(await Ze(t,n)).map((e=>({id:e.id,createdAtRound:e["created-at-round"],deleted:e.deleted}))).sort(((e,t)=>e.createdAtRound-t.createdAtRound)),l=await Promise.all(o.map((async e=>{const a=await be(t,(t=>t.minRound(e.createdAtRound).txType(Ge.appl).applicationID(e.id).address(n).addressRole("sender").notePrefix(Buffer.from(S).toString("base64")))),o=a.transactions.filter((e=>0===e["application-transaction"]["application-id"]&&e.sender===n))[0],l=a.transactions.filter((e=>e.sender===n)).sort(((e,t)=>e["confirmed-round"]===t["confirmed-round"]?(t["intra-round-offset"]-e["intra-round-offset"])/10:t["confirmed-round"]-e["confirmed-round"]))[0];return o?.note?{createdApp:e,appCreationTransaction:o,latestAppUpdateTransaction:l}:null})));return l.filter((e=>null!==e)).forEach((e=>{const{createdApp:t,appCreationTransaction:o,latestAppUpdateTransaction:l}=e,c=e=>{if(!e)return;const t=new TextDecoder,a=t.decode(Buffer.from(e)),n=Buffer.from(a,"base64").toString("utf-8");return n.startsWith(`${S}:j{`)?JSON.parse(n.substring(S.length+2)):void 0};try{const e=c(o.note),n=c(l.note);e?.name&&(a[e.name]={appId:t.id,appAddress:We(t.id),createdMetadata:e,createdRound:Number(o["confirmed-round"]),...n??e,updatedRound:Number(l?.["confirmed-round"]),deleted:t.deleted??!1})}catch(r){return void u.logger.warn(`Received error trying to retrieve app with ${t.id} for creator ${n}; failing silently`,r)}})),{creator:n,apps:a}}function Ye(e){return{dAppName:S,data:e,format:"j"}}function Ve(e,t){if(void 0!==t.updatable){if(!e.includes(k))throw new Error(`Deploy-time updatability control requested for app deployment, but ${k} not present in TEAL code`);e=e.replace(new RegExp(k,"g"),(t.updatable?1:0).toString())}if(void 0!==t.deletable){if(!e.includes(z))throw new Error(`Deploy-time deletability control requested for app deployment, but ${z} not present in TEAL code`);e=e.replace(new RegExp(z,"g"),(t.deletable?1:0).toString())}return e}function Be(e,t){if(void 0!==t)for(const a in t){const n=t[a],o=`TMPL_${a.replace(/^TMPL_/,"")}`;e=e.replace(new RegExp(o,"g"),"string"===typeof n?`0x${Buffer.from(n,"utf-8").toString("hex")}`:ArrayBuffer.isView(n)?`0x${Buffer.from(n).toString("hex")}`:n.toString())}return e}async function Ae(e,t,a,n){return e=Je(e),e=Be(e,a),n&&(e=Ve(e,n)),await ue(e,t)}function Je(e){const t=/\/\/(?=([^"\\]*(\\.|"([^"\\]*\\.)*[^"\\]*"))*[^"]*$)/;return e=e.split("\n").map((e=>e.split(t)[0].trim())).join("\n"),e}var Fe=a(11779);class Ne{constructor(e,t){this.location=e,this.programHash=t}equals(e){return this.location===e.location&&this.programHash===e.programHash}toString(){return JSON.stringify({"sourcemap-location":this.location,hash:this.programHash})}}class fe{constructor(e){this.txnGroupSources=e}static fromDict(e){return new fe(e["txn-group-sources"].map((e=>new Ne(e["sourcemap-location"],e["hash"]))))}toDict(){return{"txn-group-sources":this.txnGroupSources.map((e=>JSON.parse(e.toString())))}}}class we{constructor(e,t,a,n){this.compiledTeal=n,this.appName=e,this._rawTeal=a,this._fileName=this.stripTealExtension(t)}static fromRawTeal(e,t,a){return new we(t,a,e)}static fromCompiledTeal(e,t,a){return new we(t,a,void 0,e)}get rawTeal(){if(this._rawTeal)return this._rawTeal;if(this.compiledTeal)return this.compiledTeal.teal;throw new Error("No teal content found")}get fileName(){return this._fileName}stripTealExtension(e){return e.endsWith(".teal")?e.slice(0,-5):e}}const Le=".algokit",He="sources",Qe="sources.avm.json",Ke=".teal",ke=".teal.tok.map";async function ze(e){try{const t=await a.e(60).then(a.t.bind(a,49060,19)),n=JSON.parse(await t.promises.readFile(e,"utf8"));return fe.fromDict(n)}catch(t){const e=t;if("ENOENT"===e.code)return new fe([]);throw t}}async function Se(e,t){const n=await a.e(504).then(a.t.bind(a,71504,19)),o=await a.e(60).then(a.t.bind(a,49060,19)),l=n.join(t,Le,He,Qe),c=await ze(l);for(const a of e){const e=n.resolve(a.location);try{await o.promises.access(e);const t=c.txnGroupSources.findIndex((e=>e.equals(a)));-1===t?c.txnGroupSources.push(a):c.txnGroupSources[t]=a}catch(r){const e=r;if("ENOENT"!==e.code)throw r;{const e=c.txnGroupSources.findIndex((e=>e.equals(a)));-1!==e&&c.txnGroupSources.splice(e,1)}}}await o.promises.writeFile(l,JSON.stringify(c.toDict()),"utf8")}async function xe(e,t){const n=await a.e(504).then(a.t.bind(a,71504,19)),o=await a.e(60).then(a.t.bind(a,49060,19));await o.promises.mkdir(n.dirname(e),{recursive:!0}),await o.promises.writeFile(e,t,"utf8")}async function Me({rawTeal:e,compiledTeal:t,appName:n,fileName:o,outputPath:l,client:c,withSources:r=!0}){if(!e&&!t)throw new Error("Either rawTeal or compiledTeal must be provided.");const s=await a.e(504).then(a.t.bind(a,71504,19)),i=e?await ue(e,c):t,d=Fe.createHash("SHA-512/256").update(Buffer.from(i.compiled,"base64")).digest("base64"),g=i.sourceMap;g.sources=r?[`${o}${Ke}`]:[];const p=s.join(l,Le,He,n),u=s.join(p,`${o}${ke}`),m=s.join(p,`${o}${Ke}`);return await xe(u,JSON.stringify(g)),r&&i&&await xe(m,i.teal),new Ne(u,d)}async function Ue({sources:e,projectRoot:t,client:a,withSources:n}){if(!i())throw new Error("Sourcemaps can only be persisted in Node.js environment.");try{const o=await Promise.all(e.map((e=>Me({rawTeal:e.rawTeal,compiledTeal:e.compiledTeal,appName:e.appName,fileName:e.fileName,outputPath:t,client:a,withSources:n}))));await Se(o,t)}catch(o){const e=o instanceof Error?o:new Error(String(o));throw u.getLogger().error(`Failed to persist avm sourceMaps: ${e.stack??e.message??e}.`),e}}async function je(e,t){const{from:a,to:o,amount:l,note:c,transactionParams:r,lease:s,...i}=e,d=n["default"].makePaymentTxnWithSuggestedParamsFromObject({from:v(a),to:v(o),amount:l.microAlgos,note:X(c),suggestedParams:await Q(r,t),closeRemainderTo:void 0,rekeyTo:void 0}),g=R(s);return g&&d.addLease(g),i.skipSending||u.getLogger(i.suppressLog).debug(`Transferring ${l.microAlgos}ÂµALGOs from ${v(a)} to ${v(o)}`),J({transaction:d,from:a,sendParams:i},t)}const Ee=/transaction ([A-Z0-9]+): logic eval error: (.*). Details: .*pc=([0-9]+).*/;class Te extends Error{static parseLogicError(e){const t=e.message,a=Ee.exec(t);if(!(null===a||a.length<=3))return{txId:a[1],msg:a[2],desc:t,pc:parseInt(a[3]?a[3]:"0"),traces:e.traces}}constructor(e,t,a){super(),this.lines=5,this.teal_line=0,this.led=e,this.program=t;const n=a.getLineForPc(e.pc);if(this.teal_line=void 0===n?0:n,this.message=`${this.led.msg}. at:${n}. ${this.led.desc}`,this.teal_line>0){const e=this.teal_line>this.lines?this.teal_line-this.lines:0,a=t.length>this.teal_line+this.lines?this.teal_line+this.lines:t.length,n=t.slice(e,a);n[n.length/2]+=" <--- Error",this.stack=n.join("\n")}}}var De,Oe=n["default"].ABIMethod,Pe=n["default"].AtomicTransactionComposer,_e=n["default"].getApplicationAddress,$e=n["default"].Indexer,qe=n["default"].SourceMap;function et(e,t,a,n){if(!e.includes(a))return;const o=t.bare_call_config[n];return!(!o||"NEVER"===o)||Object.values(t.hints).some((e=>{const t=e.call_config[n];return!!t&&"NEVER"!==t}))}class tt{constructor(e,t){const{app:a,sender:o,params:l,deployTimeParams:c,...r}=e;if(this.algod=t,this.appSpec="string"==typeof a?JSON.parse(a):a,this._appName=r.name??this.appSpec.contract.name,this.deployTimeParams=c,"id"===r.resolveBy){if(r.id<0)throw new Error(`Attempt to create application client with invalid app id of ${r.id}`);this._appId=r.id}else if(this._appId=0,this._creator=r.creatorAddress,r.findExistingUsing instanceof $e)this.indexer=r.findExistingUsing;else{if(r.findExistingUsing.creator!==this._creator)throw new Error(`Attempt to create application client with invalid existingDeployments against a different creator (${r.findExistingUsing.creator}) instead of expected creator ${this._creator}`);this.existingDeployments=r.findExistingUsing}this._appAddress=n["default"].getApplicationAddress(this._appId),this.sender=o,this.params=l}async compile(e){const{deployTimeParams:t,updatable:a,deletable:n}=e??{},o=c.Buffer.from(this.appSpec.source.approval,"base64").toString("utf-8"),l=Ve(Be(o,t??this.deployTimeParams),{updatable:a,deletable:n}),r=await ue(l,this.algod);this._approvalSourceMap=r?.sourceMap;const s=c.Buffer.from(this.appSpec.source.clear,"base64").toString("utf-8"),i=Be(s,t??this.deployTimeParams),d=await ue(i,this.algod);return this._clearSourceMap=d?.sourceMap,u.debug&&u.projectRoot&&Ue({sources:[we.fromCompiledTeal(r,this._appName,"approval.teal"),we.fromCompiledTeal(d,this._appName,"clear.teal")],projectRoot:u.projectRoot,client:this.algod,withSources:!0}),{approvalCompiled:r,clearCompiled:d}}exportSourceMaps(){if(!this._approvalSourceMap||!this._clearSourceMap)throw new Error("Unable to export source maps; they haven't been loaded into this client - you need to call create, update, or deploy first");return{approvalSourceMap:this._approvalSourceMap,clearSourceMap:this._clearSourceMap}}importSourceMaps(e){this._approvalSourceMap=new qe(e.approvalSourceMap),this._clearSourceMap=new qe(e.clearSourceMap)}async deploy(e){const{schema:t,sender:a,version:n,allowUpdate:o,allowDelete:l,sendParams:r,createArgs:s,createOnCompleteAction:i,updateArgs:d,deleteArgs:g,...p}=e??{};if(0!==this._appId)throw new Error(`Attempt to deploy app which already has an app id of ${this._appId}`);const u=a??this.sender;if(!u)throw new Error("No sender provided, unable to deploy app");const m=u??this.sender;if(!this._creator)throw new Error("Attempt to `deploy` a contract without specifying `resolveBy: 'creatorAndName'` in the constructor");if(this._creator!==v(m))throw new Error(`Attempt to deploy contract with a sender address (${v(m)}) that differs from the given creator address for this application client: ${this._creator}`);const C=c.Buffer.from(this.appSpec.source.approval,"base64").toString("utf-8"),Z={deployTimeParams:p.deployTimeParams,updatable:void 0!==o?o:et(C,this.appSpec,k,"update_application"),deletable:void 0!==l?l:et(C,this.appSpec,z,"delete_application")},{approvalCompiled:b,clearCompiled:y}=await this.compile(Z);try{await this.getAppReference();const e=await Xe({from:u,approvalProgram:b.compiledBase64ToBytes,clearStateProgram:y.compiledBase64ToBytes,metadata:{name:this._appName,version:n??"1.0",updatable:Z.updatable,deletable:Z.deletable},schema:{globalByteSlices:this.appSpec.state.global.num_byte_slices,globalInts:this.appSpec.state.global.num_uints,localByteSlices:this.appSpec.state.local.num_byte_slices,localInts:this.appSpec.state.local.num_uints,...t},transactionParams:this.params,...r??{},existingDeployments:this.existingDeployments,createArgs:await this.getCallArgs(s,u),createOnCompleteAction:i,updateArgs:await this.getCallArgs(d,u),deleteArgs:await this.getCallArgs(g,u),...p},this.algod,this.indexer);if("nothing"===e.operationPerformed)return e;if(!this.existingDeployments)throw new Error("Expected existingDeployments to be present");const{transaction:a,confirmation:o,operationPerformed:l,...c}=e;return this.existingDeployments={creator:this.existingDeployments.creator,apps:{...this.existingDeployments.apps,[this._appName]:c}},{...e,compiledApproval:b,compiledClear:y}}catch(h){throw this.exposeLogicError(h)}}async create(e){const{sender:t,note:a,sendParams:n,deployTimeParams:o,updatable:l,deletable:c,onCompleteAction:r,schema:s,...i}=e??{};if(0!==this._appId)throw new Error(`Attempt to create app which already has an app id of ${this._appId}`);const d=t??this.sender;if(!d)throw new Error("No sender provided, unable to create app");const{approvalCompiled:g,clearCompiled:p}=await this.compile(e);try{const e=await P({from:d,approvalProgram:g.compiledBase64ToBytes,clearStateProgram:p.compiledBase64ToBytes,schema:{globalByteSlices:this.appSpec.state.global.num_byte_slices,globalInts:this.appSpec.state.global.num_uints,localByteSlices:this.appSpec.state.local.num_byte_slices,localInts:this.appSpec.state.local.num_uints,...s},onCompleteAction:r,args:await this.getCallArgs(i,d),note:a,transactionParams:this.params,...n??{}},this.algod);return e.confirmation&&(this._appId=e.confirmation.applicationIndex,this._appAddress=_e(this._appId)),{...e,compiledApproval:g,compiledClear:p}}catch(u){throw this.exposeLogicError(u)}}async update(e){const{sender:t,note:a,sendParams:n,deployTimeParams:o,updatable:l,deletable:c,...r}=e??{};if(0===this._appId)throw new Error("Attempt to update app which doesn't have an app id defined");const s=t??this.sender;if(!s)throw new Error("No sender provided, unable to create app");const{approvalCompiled:i,clearCompiled:d}=await this.compile(e);try{const e=await _({appId:this._appId,from:s,approvalProgram:i.compiledBase64ToBytes,clearStateProgram:d.compiledBase64ToBytes,args:await this.getCallArgs(r,s),note:a,transactionParams:this.params,...n??{}},this.algod);return{...e,compiledApproval:i,compiledClear:d}}catch(g){throw this.exposeLogicError(g)}}async call(e){if(e?.method&&!e.sendParams?.skipSending&&!e.sendParams?.atc&&this.appSpec.hints[me(this.getABIMethod(e.method))].read_only){const t=new Pe;await this.callOfType({...e,sendParams:{...e.sendParams,atc:t}},"no_op");const a=await t.simulate(this.algod);if(a.simulateResponse.txnGroups.some((e=>e.failureMessage)))throw new Error(a.simulateResponse.txnGroups.find((e=>e.failureMessage))?.failureMessage);const n=t.buildGroup();return{transaction:n[n.length-1].txn,confirmation:a.simulateResponse.txnGroups[0].txnResults.at(-1)?.txnResult,confirmations:a.simulateResponse.txnGroups[0].txnResults.map((e=>e.txnResult)),transactions:n.map((e=>e.txn)),return:a.methodResults?.length?a.methodResults[a.methodResults.length-1]:void 0}}return await this.callOfType(e,"no_op")}async optIn(e){return await this.callOfType(e,"opt_in")}async closeOut(e){return await this.callOfType(e,"close_out")}async clearState(e){return await this.callOfType(e,"clear_state")}async delete(e){return await this.callOfType(e,"delete_application")}async callOfType(e={},t){const{sender:a,note:n,sendParams:o,...l}=e,c=a??this.sender;if(!c)throw new Error("No sender provided, unable to call app");const r=await this.getAppReference();if(0===r.appId)throw new Error(`Attempt to call an app that can't be found '${this._appName}' for creator '${this._creator}'.`);try{return await ee({appId:r.appId,callType:t,from:c,args:await this.getCallArgs(l,c),note:n,transactionParams:this.params,...o??{}},this.algod)}catch(s){throw this.exposeLogicError(s)}}async fundAppAccount(e){const{amount:t,sender:a,note:n,sendParams:o}="microAlgos"in e?{amount:e}:e;if(!a&&!this.sender)throw new Error("No sender provided, unable to call app");const l=await this.getAppReference();return await je({to:l.appAddress,amount:t,from:a??this.sender,note:n,transactionParams:this.params,...o??{}},this.algod)}async getGlobalState(){const e=await this.getAppReference();if(0===e.appId)throw new Error("No app has been created yet, unable to get global state");return ae(e.appId,this.algod)}async getLocalState(e){const t=await this.getAppReference();if(0===t.appId)throw new Error("No app has been created yet, unable to get global state");return ne(t.appId,e,this.algod)}async getBoxNames(){const e=await this.getAppReference();if(0===e.appId)throw new Error("No app has been created yet, unable to get global state");return await oe(e.appId,this.algod)}async getBoxValue(e){const t=await this.getAppReference();if(0===t.appId)throw new Error("No app has been created yet, unable to get global state");return await le(t.appId,e,this.algod)}async getBoxValueFromABIType(e,t){const a=await this.getAppReference();if(0===a.appId)throw new Error("No app has been created yet, unable to get global state");return await ce({appId:a.appId,boxName:e,type:t},this.algod)}async getBoxValues(e){const t=await this.getAppReference();if(0===t.appId)throw new Error("No app has been created yet, unable to get global state");const a=await this.getBoxNames();return await Promise.all(a.filter(e??(e=>!0)).map((async e=>({name:e,value:await le(t.appId,e,this.algod)}))))}async getBoxValuesFromABIType(e,t){const a=await this.getAppReference();if(0===a.appId)throw new Error("No app has been created yet, unable to get global state");const n=await this.getBoxNames();return await Promise.all(n.filter(t??(e=>!0)).map((async t=>({name:t,value:await ce({appId:a.appId,boxName:t,type:e},this.algod)}))))}async getCallArgs(e,t){if(e){if(e.method){const a=this.getABIMethodParams(e.method);if(!a)throw new Error(`Attempt to call ABI method ${e.method}, but it wasn't found`);const n=me(a);return{...e,method:a,methodArgs:await Promise.all(e.methodArgs.map((async(e,o)=>{if(void 0!==e)return e;const l=a.args[o].name,c=l&&this.appSpec.hints?.[n]?.default_arguments?.[l];if(!c)throw new Error(`Argument at position ${o} with the name ${l} is undefined and does not have a default value strategy`);switch(c.source){case"constant":return c.data;case"abi-method":{const e=c.data,a=await this.callOfType({method:me(e),methodArgs:e.args.map((()=>{})),sender:t},"no_op");return a.return?.returnValue}case"local-state":case"global-state":{const e="global-state"===c.source?await this.getGlobalState():await this.getLocalState(t),a=c.data;if(a in e)return e[a].value;throw new Error(`Preparing default value for argument at position ${o} with the name ${l} resulted in the failure: The key '${a}' could not be found in ${c.source}`)}}})))}}return e}}getABIMethodParams(e){if(!e.includes("(")){const t=this.appSpec.contract.methods.filter((t=>t.name===e));if(t.length>1)throw new Error(`Received a call to method ${e} in contract ${this._appName}, but this resolved to multiple methods; please pass in an ABI signature instead: ${t.map(me).join(", ")}`);return t[0]}return this.appSpec.contract.methods.find((t=>me(t)===e))}getABIMethod(e){const t=this.getABIMethodParams(e);return t?new Oe(t):void 0}async getAppReference(){if(!this.existingDeployments&&this._creator&&(this.existingDeployments=await ve(this._creator,this.indexer)),this.existingDeployments&&0===this._appId){const e=this.existingDeployments.apps[this._appName];return e||{appId:0,appAddress:_e(0)}}return{appId:this._appId,appAddress:this._appAddress}}exposeLogicError(e,t){if(!t&&void 0==this._approvalSourceMap||t&&void 0==this._clearSourceMap)return e;const a=Te.parseLogicError(e);return void 0!==a?new Te(a,c.Buffer.from(t?this.appSpec.source.clear:this.appSpec.source.approval,"base64").toString().split("\n"),t?this._clearSourceMap:this._approvalSourceMap):e}}function at(e,t){return new tt(e,t)}(function(e){e[e["OptIn"]=0]="OptIn",e[e["OptOut"]=1]="OptOut"})(De||(De={}));var nt;(function(e){e[e["Algo"]=0]="Algo"})(nt||(nt={}));nt.Algo;class ot extends Error{constructor(e,t){super(e),this.response=t,this.name="URLTokenBaseHTTPError",this.response=t}}class lt{constructor(e,t,a,n={}){this.defaultHeaders=n;const o=t.endsWith("/")?t:`${t}/`,l=new URL(o);if("undefined"!==typeof a&&(l.port=a.toString()),0===l.protocol.length)throw new Error("Invalid base server URL, protocol must be defined.");this.baseURL=l,this.tokenHeader=e}getURL(e,t){let a;a=e.startsWith("./")?e:e.startsWith("/")?`.${e}`:`./${e}`;const n=new URL(a,this.baseURL);if(t)for(const[o,l]of Object.entries(t))n.searchParams.set(o,l);return n.toString()}static formatFetchResponseHeaders(e){const t={};return e.forEach(((e,a)=>{t[e]=a})),t}static async checkHttpError(e){if(e.ok)return;let t=null,a=null;try{t=new Uint8Array(await e.arrayBuffer());const n=JSON.parse(c.Buffer.from(t).toString());n.message&&(a=n.message)}catch(o){}let n=`Network request error. Received status ${e.status} (${e.statusText})`;throw a&&(n+=`: ${a}`),new ot(n,{body:null!==t?t:new Uint8Array,status:e.status,headers:lt.formatFetchResponseHeaders(e.headers)})}static async formatFetchResponse(e){return await this.checkHttpError(e),{body:new Uint8Array(await e.arrayBuffer()),status:e.status,headers:lt.formatFetchResponseHeaders(e.headers)}}async get(e,t,a={}){const n={...this.tokenHeader,...this.defaultHeaders,...a},o=await fetch(this.getURL(e,t),{mode:"cors",headers:n});return lt.formatFetchResponse(o)}async post(e,t,a,n={}){const o={...this.tokenHeader,...this.defaultHeaders,...n},l=await fetch(this.getURL(e,a),{method:"POST",mode:"cors",body:t,headers:o});return lt.formatFetchResponse(l)}async delete(e,t,a,n={}){const o={...this.tokenHeader,...this.defaultHeaders,...n},l=await fetch(this.getURL(e,a),{method:"DELETE",mode:"cors",body:t,headers:o});return lt.formatFetchResponse(l)}}class ct extends lt{async callWithRetry(e){let t,a=1;do{try{t=await e()}catch(n){if(a>=ct.MAX_TRIES)throw n;if(!(ct.RETRY_ERROR_CODES.includes(n.code)||ct.RETRY_STATUS_CODES.includes(Number(n.status))||"response"in n&&ct.RETRY_STATUS_CODES.includes(Number(n.response.status))))throw n;const e=1==a?0:Math.min(1e3*Math.pow(2,a-1),ct.MAX_BACKOFF_MS);e>0&&await new Promise((t=>setTimeout(t,e))),u.logger.warn(`algosdk request failed ${a} times. Retrying in ${e}ms: ${n}`)}}while(!t&&++a<=ct.MAX_TRIES);return t}async get(e,t,a={}){return await this.callWithRetry((()=>super.get(e,t,a)))}async post(e,t,a,n={}){return await this.callWithRetry((()=>super.post(e,t,a,n)))}async delete(e,t,a,n={}){return await this.callWithRetry((()=>super.delete(e,t,a,n)))}}ct.MAX_TRIES=5,ct.MAX_BACKOFF_MS=1e4,ct.RETRY_STATUS_CODES=[408,413,429,500,502,503,504],ct.RETRY_ERROR_CODES=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN","EPROTO"];n["default"].Indexer,n["default"].Kmd,n["default"].IntDecoding;n["default"].modelsv2.Account;n["default"].LogicSigAccount;n["default"].isTransactionWithSigner,n["default"].encodeAddress},29672:function(e,t,a){a.d(t,{E$:function(){return y},KA:function(){return Z},O:function(){return B},So:function(){return G},ew:function(){return v},k3:function(){return W}});var n=a(22216),o=a(19728),l=Object.defineProperty,c=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,p=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&g(e,a,t[a]);if(s)for(var a of s(t))d.call(t,a)&&g(e,a,t[a]);return e},u=(e,t)=>c(e,r(t)),m=(e,t,a)=>new Promise(((n,o)=>{var l=e=>{try{r(a.next(e))}catch(t){o(t)}},c=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,c);r((a=a.apply(e,t)).next())})),C=(e,t)=>({appIndex:e,name:new Uint8Array(Buffer.concat([Buffer.from("t","ascii"),n["default"].bigIntToBytes(t,8)]))}),Z=C,b=(e,t)=>({appIndex:e,name:new Uint8Array(Buffer.concat([Buffer.from("u","ascii"),Buffer.from(t.publicKey)]))}),y=b,h=e=>{switch(e){case"mainnet-v1.0":return 1765620242;case"testnet-v1.0":return 643872805;case"voitest-v1":return 40433700;case"sandnet-v1":default:return 1114}},W=h,I=e=>{if(24!==e.length)throw new Error(`Box has wrong length: ${e.length} ${Buffer.from(e).toString("hex")}`);const t={funds:Number(n["default"].decodeUint64(e.subarray(0,8),"safe")),app:Number(n["default"].decodeUint64(e.subarray(8,16),"safe")),fee:Number(n["default"].decodeUint64(e.subarray(16,24),"safe"))};return t},G=I,X={hints:{"createApplication()void":{call_config:{no_op:"CREATE"}},"updateApplication(string)void":{call_config:{update_application:"CALL"}},"bootstrap(pay,uint64)void":{call_config:{no_op:"CALL"}},"registerTask(pay,(uint64,uint64,uint64))void":{call_config:{no_op:"CALL"}},"unregisterTask(uint64,uint64)void":{call_config:{no_op:"CALL"}},"executeTask(appl)void":{call_config:{no_op:"CALL"}},"fundTask(uint64,txn)void":{call_config:{no_op:"CALL"}},"changeTaskFee(uint64,uint64)void":{call_config:{no_op:"CALL"}},"unfundTask(uint64,uint64)void":{call_config:{no_op:"CALL"}},"payment(address,uint64,address,string)void":{call_config:{no_op:"CALL"}},"assetTransfer(address,uint64,uint64,address,string)void":{call_config:{no_op:"CALL"}},"sendOnlineKeyRegistration(byte[],byte[],byte[],uint64,uint64,uint64)void":{call_config:{no_op:"CALL"}},"sendOfflineKeyRegistration()void":{call_config:{no_op:"CALL"}}},bare_call_config:{no_op:"NEVER",opt_in:"NEVER",close_out:"NEVER",update_application:"NEVER",delete_application:"NEVER"},schema:{local:{declared:{},reserved:{}},global:{declared:{feeAssetId:{type:"uint64",key:"fa"},depositedFunds:{type:"uint64",key:"d"},version:{type:"bytes",key:"scver"}},reserved:{}}},state:{global:{num_byte_slices:1,num_uints:2},local:{num_byte_slices:0,num_uints:0}},source:{approval:"I3ByYWdtYSB2ZXJzaW9uIDEwCgovLyBUaGlzIFRFQUwgd2FzIGdlbmVyYXRlZCBieSBURUFMU2NyaXB0IHYwLjkwLjMKLy8gaHR0cHM6Ly9naXRodWIuY29tL2FsZ29yYW5kZm91bmRhdGlvbi9URUFMU2NyaXB0CgovLyBUaGlzIGNvbnRyYWN0IGlzIGNvbXBsaWFudCB3aXRoIGFuZC9vciBpbXBsZW1lbnRzIHRoZSBmb2xsb3dpbmcgQVJDczogWyBBUkM0IF0KCi8vIFRoZSBmb2xsb3dpbmcgdGVuIGxpbmVzIG9mIFRFQUwgaGFuZGxlIGluaXRpYWwgcHJvZ3JhbSBmbG93Ci8vIFRoaXMgcGF0dGVybiBpcyB1c2VkIHRvIG1ha2UgaXQgZWFzeSBmb3IgYW55b25lIHRvIHBhcnNlIHRoZSBzdGFydCBvZiB0aGUgcHJvZ3JhbSBhbmQgZGV0ZXJtaW5lIGlmIGEgc3BlY2lmaWMgYWN0aW9uIGlzIGFsbG93ZWQKLy8gSGVyZSwgYWN0aW9uIHJlZmVycyB0byB0aGUgT25Db21wbGV0ZSBpbiBjb21iaW5hdGlvbiB3aXRoIHdoZXRoZXIgdGhlIGFwcCBpcyBiZWluZyBjcmVhdGVkIG9yIGNhbGxlZAovLyBFdmVyeSBwb3NzaWJsZSBhY3Rpb24gZm9yIHRoaXMgY29udHJhY3QgaXMgcmVwcmVzZW50ZWQgaW4gdGhlIHN3aXRjaCBzdGF0ZW1lbnQKLy8gSWYgdGhlIGFjdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhlIGNvbnRyYWN0LCBpdHMgcmVzcGVjdGl2ZSBicmFuY2ggd2lsbCBiZSAiKk5PVF9JTVBMRU1FTlRFRCIgd2hpY2gganVzdCBjb250YWlucyAiZXJyIgp0eG4gQXBwbGljYXRpb25JRAohCmludCA2CioKdHhuIE9uQ29tcGxldGlvbgorCnN3aXRjaCAqY2FsbF9Ob09wICpOT1RfSU1QTEVNRU5URUQgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVEICpjYWxsX1VwZGF0ZUFwcGxpY2F0aW9uICpOT1RfSU1QTEVNRU5URUQgKmNyZWF0ZV9Ob09wICpOT1RfSU1QTEVNRU5URUQgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVEICpOT1RfSU1QTEVNRU5URUQgKk5PVF9JTVBMRU1FTlRFRAoKKk5PVF9JTVBMRU1FTlRFRDoKCWVycgoKLy8gY3JlYXRlQXBwbGljYXRpb24oKXZvaWQKKmFiaV9yb3V0ZV9jcmVhdGVBcHBsaWNhdGlvbjoKCS8vIGV4ZWN1dGUgY3JlYXRlQXBwbGljYXRpb24oKXZvaWQKCWNhbGxzdWIgY3JlYXRlQXBwbGljYXRpb24KCWludCAxCglyZXR1cm4KCi8vIGNyZWF0ZUFwcGxpY2F0aW9uKCk6IHZvaWQKLy8KLy8gSW5pdGlhbCBzZXR1cApjcmVhdGVBcHBsaWNhdGlvbjoKCXByb3RvIDAgMAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjM4CgkvLyB0aGlzLnZlcnNpb24udmFsdWUgPSAnQklBVEVDLUNST04tUE9PTC0wMS0wMS0wMScKCWJ5dGUgMHg3MzYzNzY2NTcyIC8vICJzY3ZlciIKCWJ5dGUgMHgwMDE5NDI0OTQxNTQ0NTQzMmQ0MzUyNGY0ZTJkNTA0ZjRmNGMyZDMwMzEyZDMwMzEyZDMwMzEKCWFwcF9nbG9iYWxfcHV0CglyZXRzdWIKCi8vIHVwZGF0ZUFwcGxpY2F0aW9uKHN0cmluZyl2b2lkCiphYmlfcm91dGVfdXBkYXRlQXBwbGljYXRpb246CgkvLyB2ZXJzaW9uOiBzdHJpbmcKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWV4dHJhY3QgMiAwCgoJLy8gZXhlY3V0ZSB1cGRhdGVBcHBsaWNhdGlvbihzdHJpbmcpdm9pZAoJY2FsbHN1YiB1cGRhdGVBcHBsaWNhdGlvbgoJaW50IDEKCXJldHVybgoKLy8gdXBkYXRlQXBwbGljYXRpb24odmVyc2lvbjogc3RyaW5nKTogdm9pZAovLwovLyBDcmVhdG9yIGNhbiB1cGRhdGUgYXBwbGljYXRpb24KLy8gQHBhcmFtIHZlcnNpb24gQXBwIHZlcnNpb24KdXBkYXRlQXBwbGljYXRpb246Cglwcm90byAxIDAKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czo0NgoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjQ3CgkvLyB0aGlzLnZlcnNpb24udmFsdWUgPSB2ZXJzaW9uCglieXRlIDB4NzM2Mzc2NjU3MiAvLyAic2N2ZXIiCglmcmFtZV9kaWcgLTEgLy8gdmVyc2lvbjogc3RyaW5nCglkdXAKCWxlbgoJaXRvYgoJZXh0cmFjdCA2IDIKCXN3YXAKCWNvbmNhdAoJYXBwX2dsb2JhbF9wdXQKCXJldHN1YgoKLy8gYm9vdHN0cmFwKHBheSx1aW50NjQpdm9pZAoqYWJpX3JvdXRlX2Jvb3RzdHJhcDoKCS8vIGZlZUFzc2V0SWQ6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQoJYnRvaQoKCS8vIHR4QmFzZURlcG9zaXQ6IHBheQoJdHhuIEdyb3VwSW5kZXgKCWludCAxCgktCglkdXAKCWd0eG5zIFR5cGVFbnVtCglpbnQgcGF5Cgk9PQoJYXNzZXJ0CgoJLy8gZXhlY3V0ZSBib290c3RyYXAocGF5LHVpbnQ2NCl2b2lkCgljYWxsc3ViIGJvb3RzdHJhcAoJaW50IDEKCXJldHVybgoKLy8gYm9vdHN0cmFwKHR4QmFzZURlcG9zaXQ6IFBheVR4biwgZmVlQXNzZXRJZDogQXNzZXRJRCk6IHZvaWQKLy8KLy8gQm9vdHN0cmFwIHRoZSBjb250cmFjdCB0byBvcHRpbiB0byB0aGUgZmVlIGFzc2V0IGFuZCBzZXR1cCBiYXNpYyB2YXJpYWJsZXMKLy8KLy8gQHBhcmFtIHR4QmFzZURlcG9zaXQgRGVwb3NpdCBNQlIKLy8gQHBhcmFtIGZlZUFzc2V0SWQgIEZlZSBhc3NldCBpZApib290c3RyYXA6Cglwcm90byAyIDAKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czo1NwoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjU5CgkvLyB2ZXJpZnlQYXlUeG4odHhCYXNlRGVwb3NpdCwgewoJLy8gICAgICAgcmVjZWl2ZXI6IHRoaXMuYXBwLmFkZHJlc3MsCgkvLyAgICAgICBhbW91bnQ6IHsgZ3JlYXRlclRoYW5FcXVhbFRvOiAwIH0sCgkvLyAgICAgfSkKCS8vIHZlcmlmeSByZWNlaXZlcgoJZnJhbWVfZGlnIC0xIC8vIHR4QmFzZURlcG9zaXQ6IFBheVR4bgoJZ3R4bnMgUmVjZWl2ZXIKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gdmVyaWZ5IGFtb3VudAoJZnJhbWVfZGlnIC0xIC8vIHR4QmFzZURlcG9zaXQ6IFBheVR4bgoJZ3R4bnMgQW1vdW50CglpbnQgMAoJPj0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjY0CgkvLyB0aGlzLmZlZUFzc2V0SWQudmFsdWUgPSBmZWVBc3NldElkLmlkCglieXRlIDB4NjY2MSAvLyAiZmEiCglmcmFtZV9kaWcgLTIgLy8gZmVlQXNzZXRJZDogQXNzZXRJRAoJYXBwX2dsb2JhbF9wdXQKCgkvLyAqaWYwX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6NzcKCS8vIHRoaXMuZmVlQXNzZXRJZC52YWx1ZSA+IDAKCWJ5dGUgMHg2NjYxIC8vICJmYSIKCWFwcF9nbG9iYWxfZ2V0CglpbnQgMAoJPgoJYnogKmlmMF9lbmQKCgkvLyAqaWYwX2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjc4CgkvLyBzZW5kQXNzZXRUcmFuc2Zlcih7CgkvLyAgICAgICAgIGFzc2V0UmVjZWl2ZXI6IGdsb2JhbHMuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKCS8vICAgICAgICAgYXNzZXRBbW91bnQ6IDAsCgkvLyAgICAgICAgIHhmZXJBc3NldDogQXNzZXRJRC5mcm9tVWludDY0KHRoaXMuZmVlQXNzZXRJZC52YWx1ZSksCgkvLyAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50IGF4ZmVyCglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6NzkKCS8vIGFzc2V0UmVjZWl2ZXI6IGdsb2JhbHMuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCWl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjgwCgkvLyBhc3NldEFtb3VudDogMAoJaW50IDAKCWl0eG5fZmllbGQgQXNzZXRBbW91bnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czo4MQoJLy8geGZlckFzc2V0OiBBc3NldElELmZyb21VaW50NjQodGhpcy5mZWVBc3NldElkLnZhbHVlKQoJYnl0ZSAweDY2NjEgLy8gImZhIgoJYXBwX2dsb2JhbF9nZXQKCWl0eG5fZmllbGQgWGZlckFzc2V0CgoJLy8gRmVlIGZpZWxkIG5vdCBzZXQsIGRlZmF1bHRpbmcgdG8gMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoKKmlmMF9lbmQ6CglyZXRzdWIKCi8vIHJlZ2lzdGVyVGFzayhwYXksKHVpbnQ2NCx1aW50NjQsdWludDY0KSl2b2lkCiphYmlfcm91dGVfcmVnaXN0ZXJUYXNrOgoJLy8gdGFzazogKHVpbnQ2NCx1aW50NjQsdWludDY0KQoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQoJZHVwCglsZW4KCWludCAyNAoJPT0KCWFzc2VydAoKCS8vIHJlZ2lzdHJhdGlvbkZlZURlcG9zaXQ6IHBheQoJdHhuIEdyb3VwSW5kZXgKCWludCAxCgktCglkdXAKCWd0eG5zIFR5cGVFbnVtCglpbnQgcGF5Cgk9PQoJYXNzZXJ0CgoJLy8gZXhlY3V0ZSByZWdpc3RlclRhc2socGF5LCh1aW50NjQsdWludDY0LHVpbnQ2NCkpdm9pZAoJY2FsbHN1YiByZWdpc3RlclRhc2sKCWludCAxCglyZXR1cm4KCi8vIHJlZ2lzdGVyVGFzayhyZWdpc3RyYXRpb25GZWVEZXBvc2l0OiBQYXlUeG4sIHRhc2s6IFRhc2spOiB2b2lkCi8vCi8vIFJlZ2lzdGVyIGEgdGFzayB0byBiZSBleGVjdXRlZAovLyBPbmx5IGFwcCBpdCBzZWxmIGNhbiBjYWxsIHJlZ2lzdGVyIHRhc2sKLy8KLy8gQHBhcmFtIHJlZ2lzdHJhdGlvbkZlZURlcG9zaXQgVGhlIGF4ZmVyIG9yIHBheSB0aGF0IGRlcG9zaXRzIHRoZSBpbml0aWFsIGZ1bmRzCi8vIEBwYXJhbSB0YXNrIFRoZSB0YXNrIG9iamVjdApyZWdpc3RlclRhc2s6Cglwcm90byAyIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZSAweAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjk0CgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSB0YXNrLmFwcC5hZGRyZXNzKQoJdHhuIFNlbmRlcgoJZnJhbWVfZGlnIC0yIC8vIHRhc2s6IFRhc2sKCWV4dHJhY3QgOCA4CglidG9pCglhcHBfcGFyYW1zX2dldCBBcHBBZGRyZXNzCglwb3AKCT09Cglhc3NlcnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czo5NQoJLy8gYXNzZXJ0KHRhc2suZnVuZHMgPT09IDApCglmcmFtZV9kaWcgLTIgLy8gdGFzazogVGFzawoJZXh0cmFjdCAwIDgKCWJ0b2kKCWludCAwCgk9PQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6OTcKCS8vIHZlcmlmeVBheVR4bihyZWdpc3RyYXRpb25GZWVEZXBvc2l0LCB7CgkvLyAgICAgICByZWNlaXZlcjogdGhpcy5hcHAuYWRkcmVzcywKCS8vICAgICB9KQoJLy8gdmVyaWZ5IHJlY2VpdmVyCglmcmFtZV9kaWcgLTEgLy8gcmVnaXN0cmF0aW9uRmVlRGVwb3NpdDogUGF5VHhuCglndHhucyBSZWNlaXZlcgoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCT09Cglhc3NlcnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMDAKCS8vIGFzc2VydChyZWdpc3RyYXRpb25GZWVEZXBvc2l0LmFtb3VudCA+IDUwMF8wMDApCglmcmFtZV9kaWcgLTEgLy8gcmVnaXN0cmF0aW9uRmVlRGVwb3NpdDogUGF5VHhuCglndHhucyBBbW91bnQKCWludCA1MDBfMDAwCgk+Cglhc3NlcnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMDIKCS8vIHRoaXMudGFza3ModGFzay5hcHApLnZhbHVlID0gdGFzawoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0yIC8vIHRhc2s6IFRhc2sKCWV4dHJhY3QgOCA4CglidG9pCglpdG9iCgljb25jYXQKCWZyYW1lX2RpZyAtMiAvLyB0YXNrOiBUYXNrCglib3hfcHV0CgoJLy8gKmlmMV9jb25kaXRpb24KCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjEwMwoJLy8gdGhpcy51c2VyMnRhc2tzKHRhc2suYXBwLmNyZWF0b3IpLmV4aXN0cwoJYnl0ZSAweDc1IC8vICJ1IgoJZnJhbWVfZGlnIC0yIC8vIHRhc2s6IFRhc2sKCWV4dHJhY3QgOCA4CglidG9pCglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCWNvbmNhdAoJYm94X2xlbgoJc3dhcAoJcG9wCglieiAqaWYxX2Vsc2UKCgkvLyAqaWYxX2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjEwNAoJLy8gdGhpcy51c2VyMnRhc2tzKHRhc2suYXBwLmNyZWF0b3IpLnZhbHVlLnB1c2godGFzay5hcHApCglieXRlIDB4NzUgLy8gInUiCglmcmFtZV9kaWcgLTIgLy8gdGFzazogVGFzawoJZXh0cmFjdCA4IDgKCWJ0b2kKCWFwcF9wYXJhbXNfZ2V0IEFwcENyZWF0b3IKCXBvcAoJY29uY2F0CglpbnQgMgoJaW50IDAKCWJveF9leHRyYWN0CglmcmFtZV9kaWcgLTIgLy8gdGFzazogVGFzawoJZXh0cmFjdCA4IDgKCWJ0b2kKCWl0b2IKCWNvbmNhdAoJYnl0ZSAweDc1IC8vICJ1IgoJZnJhbWVfZGlnIC0yIC8vIHRhc2s6IFRhc2sKCWV4dHJhY3QgOCA4CglidG9pCglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCWNvbmNhdAoJZHVwCglib3hfZGVsCglwb3AKCXN3YXAKCWR1cAoJbGVuCglpbnQgOAoJLwoJaXRvYgoJZXh0cmFjdCA2IDIKCXN3YXAKCWNvbmNhdAoJYm94X3B1dAoJYiAqaWYxX2VuZAoKKmlmMV9lbHNlOgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTA2CgkvLyBuZXdXaGl0ZWxpc3Q6IEFwcElEW10gPSBbdGFzay5hcHBdCglmcmFtZV9kaWcgLTIgLy8gdGFzazogVGFzawoJZXh0cmFjdCA4IDgKCWJ0b2kKCWl0b2IKCWZyYW1lX2J1cnkgMCAvLyBuZXdXaGl0ZWxpc3Q6IEFwcElEW10KCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMDcKCS8vIHRoaXMudXNlcjJ0YXNrcyh0YXNrLmFwcC5jcmVhdG9yKS52YWx1ZSA9IG5ld1doaXRlbGlzdAoJYnl0ZSAweDc1IC8vICJ1IgoJZnJhbWVfZGlnIC0yIC8vIHRhc2s6IFRhc2sKCWV4dHJhY3QgOCA4CglidG9pCglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCWNvbmNhdAoJZHVwCglib3hfZGVsCglwb3AKCWZyYW1lX2RpZyAwIC8vIG5ld1doaXRlbGlzdDogQXBwSURbXQoJZHVwCglsZW4KCWludCA4CgkvCglpdG9iCglleHRyYWN0IDYgMgoJc3dhcAoJY29uY2F0Cglib3hfcHV0CgoqaWYxX2VuZDoKCXJldHN1YgoKLy8gdW5yZWdpc3RlclRhc2sodWludDY0LHVpbnQ2NCl2b2lkCiphYmlfcm91dGVfdW5yZWdpc3RlclRhc2s6CgkvLyBpbmRleFRvRGVsZXRlOiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDIKCWJ0b2kKCgkvLyBhcHA6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQoJYnRvaQoKCS8vIGV4ZWN1dGUgdW5yZWdpc3RlclRhc2sodWludDY0LHVpbnQ2NCl2b2lkCgljYWxsc3ViIHVucmVnaXN0ZXJUYXNrCglpbnQgMQoJcmV0dXJuCgovLyB1bnJlZ2lzdGVyVGFzayhhcHA6IEFwcElELCBpbmRleFRvRGVsZXRlOiB1aW50NjQpOiB2b2lkCi8vCi8vIFVucmVnaXN0ZXIgYSB0YXNrIHdoZW4gdGFzayBpcyBkZWxldGVkCi8vCi8vIEBwYXJhbSBhcHAgQXBwIHRvIHVucmVnaXN0ZXIKLy8gQHBhcmFtIGluZGV4VG9EZWxldGUgQXBwIGluZGV4IHRvIGRlbGV0ZSBmcm9tIHVzZXIncyBhcHBzCnVucmVnaXN0ZXJUYXNrOgoJcHJvdG8gMiAwCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGUgMHgKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMTgKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IGFwcC5hZGRyZXNzKQoJdHhuIFNlbmRlcgoJZnJhbWVfZGlnIC0xIC8vIGFwcDogQXBwSUQKCWFwcF9wYXJhbXNfZ2V0IEFwcEFkZHJlc3MKCXBvcAoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjExOQoJLy8gdGFzayA9IHRoaXMudGFza3MoYXBwKS52YWx1ZQoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0xIC8vIGFwcDogQXBwSUQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfYnVyeSAwIC8vIHN0b3JhZ2Uga2V5Ly90YXNrCgoJLy8gKmlmMl9jb25kaXRpb24KCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjEyMAoJLy8gdGFzay5mdW5kcyA+IDAKCWludCAwCglpbnQgOAoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0xIC8vIGFwcDogQXBwSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWludCAwCgk+CglieiAqaWYyX2VuZAoKCS8vICppZjJfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTIxCgkvLyBzZW5kQXNzZXRUcmFuc2Zlcih7CgkvLyAgICAgICAgIGFzc2V0QW1vdW50OiB0YXNrLmZ1bmRzLAoJLy8gICAgICAgICBhc3NldFJlY2VpdmVyOiBhcHAuY3JlYXRvciwKCS8vICAgICAgICAgeGZlckFzc2V0OiBBc3NldElELmZyb21VaW50NjQodGhpcy5mZWVBc3NldElkLnZhbHVlKSwKCS8vICAgICAgICAgZmVlOiAwLAoJLy8gICAgICAgfSkKCWl0eG5fYmVnaW4KCWludCBheGZlcgoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjEyMgoJLy8gYXNzZXRBbW91bnQ6IHRhc2suZnVuZHMKCWludCAwCglpbnQgOAoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0xIC8vIGFwcDogQXBwSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWl0eG5fZmllbGQgQXNzZXRBbW91bnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMjMKCS8vIGFzc2V0UmVjZWl2ZXI6IGFwcC5jcmVhdG9yCglmcmFtZV9kaWcgLTEgLy8gYXBwOiBBcHBJRAoJYXBwX3BhcmFtc19nZXQgQXBwQ3JlYXRvcgoJcG9wCglpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMjQKCS8vIHhmZXJBc3NldDogQXNzZXRJRC5mcm9tVWludDY0KHRoaXMuZmVlQXNzZXRJZC52YWx1ZSkKCWJ5dGUgMHg2NjYxIC8vICJmYSIKCWFwcF9nbG9iYWxfZ2V0CglpdHhuX2ZpZWxkIFhmZXJBc3NldAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjEyNQoJLy8gZmVlOiAwCglpbnQgMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CgoqaWYyX2VuZDoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjEyOAoJLy8gdGFzay5mdW5kcyA9IDAKCWZyYW1lX2RpZyAwIC8vIHN0b3JhZ2Uga2V5Ly90YXNrCglpbnQgMAoJYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKCWJveF9yZXBsYWNlCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTI5CgkvLyB0aGlzLnRhc2tzKGFwcCkuZGVsZXRlKCkKCWJ5dGUgMHg3NCAvLyAidCIKCWZyYW1lX2RpZyAtMSAvLyBhcHA6IEFwcElECglpdG9iCgljb25jYXQKCWJveF9kZWwKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxMzQKCS8vIHRoaXMudXNlcjJ0YXNrcyhhcHAuY3JlYXRvcikudmFsdWUuc3BsaWNlKGluZGV4VG9EZWxldGUsIDEpCglieXRlIDB4NzUgLy8gInUiCglmcmFtZV9kaWcgLTEgLy8gYXBwOiBBcHBJRAoJYXBwX3BhcmFtc19nZXQgQXBwQ3JlYXRvcgoJcG9wCgljb25jYXQKCWludCAyCglpbnQgMAoJYm94X2V4dHJhY3QKCWludCAxCglmcmFtZV9kaWcgLTIgLy8gaW5kZXhUb0RlbGV0ZTogdWludDY0CglpbnQgOAoJKgoJc3RvcmUgMjQ3IC8vIHNwbGljZSBzdGFydAoJaW50IDE2CglzdG9yZSAyNDYgLy8gc3BsaWNlIGJ5dGUgbGVuZ3RoCglieXRlIDB4NzUgLy8gInUiCglmcmFtZV9kaWcgLTEgLy8gYXBwOiBBcHBJRAoJYXBwX3BhcmFtc19nZXQgQXBwQ3JlYXRvcgoJcG9wCgljb25jYXQKCWludCAyCglpbnQgMAoJYm94X2V4dHJhY3QKCWludCAwCglsb2FkIDI0NyAvLyBzcGxpY2Ugc3RhcnQKCXN1YnN0cmluZzMKCWJ5dGUgMHg3NSAvLyAidSIKCWZyYW1lX2RpZyAtMSAvLyBhcHA6IEFwcElECglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCWNvbmNhdAoJaW50IDIKCWludCAwCglib3hfZXh0cmFjdAoJZHVwCglsZW4KCWxvYWQgMjQ3IC8vIHNwbGljZSBzdGFydAoJbG9hZCAyNDYgLy8gc3BsaWNlIGJ5dGUgbGVuZ3RoCgkrCglpbnQgOAoJLQoJc3dhcAoJc3Vic3RyaW5nMwoJY29uY2F0CglieXRlIDB4NzUgLy8gInUiCglmcmFtZV9kaWcgLTEgLy8gYXBwOiBBcHBJRAoJYXBwX3BhcmFtc19nZXQgQXBwQ3JlYXRvcgoJcG9wCgljb25jYXQKCWR1cAoJYm94X2RlbAoJcG9wCglzd2FwCglkdXAKCWxlbgoJaW50IDgKCS8KCWl0b2IKCWV4dHJhY3QgNiAyCglzd2FwCgljb25jYXQKCWJveF9wdXQKCXJldHN1YgoKLy8gZXhlY3V0ZVRhc2soYXBwbCl2b2lkCiphYmlfcm91dGVfZXhlY3V0ZVRhc2s6CgkvLyB0YXNrQXBwQ2FsbDogYXBwbAoJdHhuIEdyb3VwSW5kZXgKCWludCAxCgktCglkdXAKCWd0eG5zIFR5cGVFbnVtCglpbnQgYXBwbAoJPT0KCWFzc2VydAoKCS8vIGV4ZWN1dGUgZXhlY3V0ZVRhc2soYXBwbCl2b2lkCgljYWxsc3ViIGV4ZWN1dGVUYXNrCglpbnQgMQoJcmV0dXJuCgovLyBleGVjdXRlVGFzayh0YXNrQXBwQ2FsbDogQXBwQ2FsbFR4bik6IHZvaWQKLy8KLy8gRXhlY3V0ZSBhIHRhc2sgYW5kIGdldCB0aGUgcmV3YXJkCi8vCi8vIEBwYXJhbSB0YXNrQXBwQ2FsbCBUaGUgY2FsbCB0byB0aGUgdGFzayBhcHAKZXhlY3V0ZVRhc2s6Cglwcm90byAxIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZSAweAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE0NAoJLy8gdGFzayA9IHRoaXMudGFza3ModGFza0FwcENhbGwuYXBwbGljYXRpb25JRCkudmFsdWUKCWJ5dGUgMHg3NCAvLyAidCIKCWZyYW1lX2RpZyAtMSAvLyB0YXNrQXBwQ2FsbDogQXBwQ2FsbFR4bgoJZ3R4bnMgQXBwbGljYXRpb25JRAoJaXRvYgoJY29uY2F0CglmcmFtZV9idXJ5IDAgLy8gc3RvcmFnZSBrZXkvL3Rhc2sKCgkvLyAqaWYzX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTQ3CgkvLyB0aGlzLmZlZUFzc2V0SWQudmFsdWUgPT09IDAKCWJ5dGUgMHg2NjYxIC8vICJmYSIKCWFwcF9nbG9iYWxfZ2V0CglpbnQgMAoJPT0KCWJ6ICppZjNfZWxzZQoKCS8vICppZjNfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTQ4CgkvLyBzZW5kUGF5bWVudCh7CgkvLyAgICAgICAgIHJlY2VpdmVyOiB0aGlzLnR4bi5zZW5kZXIsCgkvLyAgICAgICAgIGFtb3VudDogdGFzay5mZWUsCgkvLyAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50IHBheQoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE0OQoJLy8gcmVjZWl2ZXI6IHRoaXMudHhuLnNlbmRlcgoJdHhuIFNlbmRlcgoJaXR4bl9maWVsZCBSZWNlaXZlcgoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE1MAoJLy8gYW1vdW50OiB0YXNrLmZlZQoJaW50IDE2IC8vIGhlYWRPZmZzZXQKCWludCA4CglieXRlIDB4NzQgLy8gInQiCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTQ0CgkvLyB0YXNrQXBwQ2FsbC5hcHBsaWNhdGlvbklECglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcENhbGw6IEFwcENhbGxUeG4KCWd0eG5zIEFwcGxpY2F0aW9uSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWl0eG5fZmllbGQgQW1vdW50CgoJLy8gRmVlIGZpZWxkIG5vdCBzZXQsIGRlZmF1bHRpbmcgdG8gMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoJYiAqaWYzX2VuZAoKKmlmM19lbHNlOgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTUzCgkvLyBzZW5kQXNzZXRUcmFuc2Zlcih7CgkvLyAgICAgICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudHhuLnNlbmRlciwKCS8vICAgICAgICAgYXNzZXRBbW91bnQ6IHRhc2suZmVlLAoJLy8gICAgICAgICB4ZmVyQXNzZXQ6IEFzc2V0SUQuZnJvbVVpbnQ2NCh0aGlzLmZlZUFzc2V0SWQudmFsdWUpLAoJLy8gICAgICAgfSkKCWl0eG5fYmVnaW4KCWludCBheGZlcgoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE1NAoJLy8gYXNzZXRSZWNlaXZlcjogdGhpcy50eG4uc2VuZGVyCgl0eG4gU2VuZGVyCglpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxNTUKCS8vIGFzc2V0QW1vdW50OiB0YXNrLmZlZQoJaW50IDE2IC8vIGhlYWRPZmZzZXQKCWludCA4CglieXRlIDB4NzQgLy8gInQiCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTQ0CgkvLyB0YXNrQXBwQ2FsbC5hcHBsaWNhdGlvbklECglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcENhbGw6IEFwcENhbGxUeG4KCWd0eG5zIEFwcGxpY2F0aW9uSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWl0eG5fZmllbGQgQXNzZXRBbW91bnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxNTYKCS8vIHhmZXJBc3NldDogQXNzZXRJRC5mcm9tVWludDY0KHRoaXMuZmVlQXNzZXRJZC52YWx1ZSkKCWJ5dGUgMHg2NjYxIC8vICJmYSIKCWFwcF9nbG9iYWxfZ2V0CglpdHhuX2ZpZWxkIFhmZXJBc3NldAoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludCAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCippZjNfZW5kOgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTYyCgkvLyB0YXNrLmZ1bmRzIC09IHRhc2suZmVlCglpbnQgMAoJZHVwCglpbnQgOAoJYnl0ZSAweDc0IC8vICJ0IgoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE0NAoJLy8gdGFza0FwcENhbGwuYXBwbGljYXRpb25JRAoJZnJhbWVfZGlnIC0xIC8vIHRhc2tBcHBDYWxsOiBBcHBDYWxsVHhuCglndHhucyBBcHBsaWNhdGlvbklECglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9leHRyYWN0CglidG9pCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTYyCgkvLyB0YXNrLmZlZQoJaW50IDE2IC8vIGhlYWRPZmZzZXQKCWludCA4CglieXRlIDB4NzQgLy8gInQiCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTQ0CgkvLyB0YXNrQXBwQ2FsbC5hcHBsaWNhdGlvbklECglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcENhbGw6IEFwcENhbGxUeG4KCWd0eG5zIEFwcGxpY2F0aW9uSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCS0KCWl0b2IKCWZyYW1lX2RpZyAwIC8vIHN0b3JhZ2Uga2V5Ly90YXNrCgljb3ZlciAyCglib3hfcmVwbGFjZQoJcmV0c3ViCgovLyBmdW5kVGFzayh1aW50NjQsdHhuKXZvaWQKKmFiaV9yb3V0ZV9mdW5kVGFzazoKCS8vIGRlcG9zaXQ6IHR4bgoJdHhuIEdyb3VwSW5kZXgKCWludCAxCgktCgoJLy8gdGFza0FwcElkOiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWJ0b2kKCgkvLyBleGVjdXRlIGZ1bmRUYXNrKHVpbnQ2NCx0eG4pdm9pZAoJY2FsbHN1YiBmdW5kVGFzawoJaW50IDEKCXJldHVybgoKLy8gZnVuZFRhc2sodGFza0FwcElkOiBBcHBJRCwgZGVwb3NpdDogVHhuKTogdm9pZAovLwovLyBEZXBvc2l0IGZ1bmRzIGZvciBhIHRhc2sKLy8KLy8gQHBhcmFtIHRhc2tBcHBJZCBUaGUgSUQgb2YgdGhlIHRhc2sgdG8gZnVuZAovLyBAcGFyYW0gZGVwb3NpdCBUaGUgcGF5IG9yIGF4ZmVyIHRvIGZ1bmQgdGhlIHRhc2sKZnVuZFRhc2s6Cglwcm90byAyIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZSAweAoJZHVwbiAyCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTcyCgkvLyB0YXNrID0gdGhpcy50YXNrcyh0YXNrQXBwSWQpLnZhbHVlCglieXRlIDB4NzQgLy8gInQiCglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcElkOiBBcHBJRAoJaXRvYgoJY29uY2F0CglmcmFtZV9idXJ5IDAgLy8gc3RvcmFnZSBrZXkvL3Rhc2sKCgkvLyAqaWY0X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTc0CgkvLyB0aGlzLmZlZUFzc2V0SWQudmFsdWUgPT09IDAKCWJ5dGUgMHg2NjYxIC8vICJmYSIKCWFwcF9nbG9iYWxfZ2V0CglpbnQgMAoJPT0KCWJ6ICppZjRfZWxzZQoKCS8vICppZjRfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTc1CgkvLyB2ZXJpZnlQYXlUeG4oZGVwb3NpdCwgewoJLy8gICAgICAgICByZWNlaXZlcjogdGhpcy5hcHAuYWRkcmVzcywKCS8vICAgICAgIH0pCgkvLyB2ZXJpZnkgcGF5CglmcmFtZV9kaWcgLTIgLy8gZGVwb3NpdDogVHhuCglndHhucyBUeXBlRW51bQoJaW50IHBheQoJPT0KCWFzc2VydAoKCS8vIHZlcmlmeSByZWNlaXZlcgoJZnJhbWVfZGlnIC0yIC8vIGRlcG9zaXQ6IFR4bgoJZ3R4bnMgUmVjZWl2ZXIKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTc4CgkvLyBmZWUgPSBkZXBvc2l0LmFtb3VudCAvIDEwMAoJZnJhbWVfZGlnIC0yIC8vIGRlcG9zaXQ6IFR4bgoJZ3R4bnMgQW1vdW50CglpbnQgMTAwCgkvCglmcmFtZV9idXJ5IDEgLy8gZmVlOiB1aW50NjQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxNzkKCS8vIHRhc2suZnVuZHMgKz0gZGVwb3NpdC5hbW91bnQgLSBmZWUKCWludCAwCglkdXAKCWludCA4CglieXRlIDB4NzQgLy8gInQiCglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcElkOiBBcHBJRAoJaXRvYgoJY29uY2F0Cgljb3ZlciAyCglib3hfZXh0cmFjdAoJYnRvaQoJZnJhbWVfZGlnIC0yIC8vIGRlcG9zaXQ6IFR4bgoJZ3R4bnMgQW1vdW50CglmcmFtZV9kaWcgMSAvLyBmZWU6IHVpbnQ2NAoJLQoJKwoJaXRvYgoJZnJhbWVfZGlnIDAgLy8gc3RvcmFnZSBrZXkvL3Rhc2sKCWNvdmVyIDIKCWJveF9yZXBsYWNlCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTgwCgkvLyB0aGlzLmRlcG9zaXRlZEZ1bmRzLnZhbHVlICs9IGRlcG9zaXQuYW1vdW50IC0gZmVlCglieXRlIDB4NjQgLy8gImQiCglhcHBfZ2xvYmFsX2dldAoJZnJhbWVfZGlnIC0yIC8vIGRlcG9zaXQ6IFR4bgoJZ3R4bnMgQW1vdW50CglmcmFtZV9kaWcgMSAvLyBmZWU6IHVpbnQ2NAoJLQoJKwoJYnl0ZSAweDY0IC8vICJkIgoJc3dhcAoJYXBwX2dsb2JhbF9wdXQKCWIgKmlmNF9lbmQKCippZjRfZWxzZToKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE4MgoJLy8gdmVyaWZ5QXNzZXRUcmFuc2ZlclR4bihkZXBvc2l0LCB7CgkvLyAgICAgICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMuYXBwLmFkZHJlc3MsCgkvLyAgICAgICAgIHhmZXJBc3NldDogQXNzZXRJRC5mcm9tVWludDY0KHRoaXMuZmVlQXNzZXRJZC52YWx1ZSksCgkvLyAgICAgICB9KQoJLy8gdmVyaWZ5IGF4ZmVyCglmcmFtZV9kaWcgLTIgLy8gZGVwb3NpdDogVHhuCglndHhucyBUeXBlRW51bQoJaW50IGF4ZmVyCgk9PQoJYXNzZXJ0CgoJLy8gdmVyaWZ5IGFzc2V0UmVjZWl2ZXIKCWZyYW1lX2RpZyAtMiAvLyBkZXBvc2l0OiBUeG4KCWd0eG5zIEFzc2V0UmVjZWl2ZXIKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gdmVyaWZ5IHhmZXJBc3NldAoJZnJhbWVfZGlnIC0yIC8vIGRlcG9zaXQ6IFR4bgoJZ3R4bnMgWGZlckFzc2V0CglieXRlIDB4NjY2MSAvLyAiZmEiCglhcHBfZ2xvYmFsX2dldAoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjE4NgoJLy8gZmVlID0gZGVwb3NpdC5hbW91bnQgLyAxMDAKCWZyYW1lX2RpZyAtMiAvLyBkZXBvc2l0OiBUeG4KCWd0eG5zIEFtb3VudAoJaW50IDEwMAoJLwoJZnJhbWVfYnVyeSAyIC8vIGZlZTogdWludDY0CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTg3CgkvLyB0YXNrLmZ1bmRzICs9IGRlcG9zaXQuYXNzZXRBbW91bnQgLSBmZWUKCWludCAwCglkdXAKCWludCA4CglieXRlIDB4NzQgLy8gInQiCglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcElkOiBBcHBJRAoJaXRvYgoJY29uY2F0Cgljb3ZlciAyCglib3hfZXh0cmFjdAoJYnRvaQoJZnJhbWVfZGlnIC0yIC8vIGRlcG9zaXQ6IFR4bgoJZ3R4bnMgQXNzZXRBbW91bnQKCWZyYW1lX2RpZyAyIC8vIGZlZTogdWludDY0CgktCgkrCglpdG9iCglmcmFtZV9kaWcgMCAvLyBzdG9yYWdlIGtleS8vdGFzawoJY292ZXIgMgoJYm94X3JlcGxhY2UKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoxODgKCS8vIHRoaXMuZGVwb3NpdGVkRnVuZHMudmFsdWUgKz0gZGVwb3NpdC5hc3NldEFtb3VudCAtIGZlZQoJYnl0ZSAweDY0IC8vICJkIgoJYXBwX2dsb2JhbF9nZXQKCWZyYW1lX2RpZyAtMiAvLyBkZXBvc2l0OiBUeG4KCWd0eG5zIEFzc2V0QW1vdW50CglmcmFtZV9kaWcgMiAvLyBmZWU6IHVpbnQ2NAoJLQoJKwoJYnl0ZSAweDY0IC8vICJkIgoJc3dhcAoJYXBwX2dsb2JhbF9wdXQKCippZjRfZW5kOgoJcmV0c3ViCgovLyBjaGFuZ2VUYXNrRmVlKHVpbnQ2NCx1aW50NjQpdm9pZAoqYWJpX3JvdXRlX2NoYW5nZVRhc2tGZWU6CgkvLyBmZWU6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgoJYnRvaQoKCS8vIHRhc2tBcHBJZDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZXhlY3V0ZSBjaGFuZ2VUYXNrRmVlKHVpbnQ2NCx1aW50NjQpdm9pZAoJY2FsbHN1YiBjaGFuZ2VUYXNrRmVlCglpbnQgMQoJcmV0dXJuCgovLyBjaGFuZ2VUYXNrRmVlKHRhc2tBcHBJZDogQXBwSUQsIGZlZTogdWludDY0KTogdm9pZAovLwovLyBDcmVhdG9yIG9mIHRoZSB0YXNrIGlzIGFsbG93ZWQgdG8gY2hhbmdlIHRoZSBmZWUKLy8KLy8gQHBhcmFtIHRhc2tBcHBJZCBUaGUgSUQgb2YgdGhlIHRhc2sgdG8gZnVuZAovLyBAcGFyYW0gZmVlIEZlZSBpbiBiYXNlIHVuaXRzIG9mIHRoZSBmZWUgdG9rZW4KY2hhbmdlVGFza0ZlZToKCXByb3RvIDIgMAoKCS8vIFB1c2ggZW1wdHkgYnl0ZXMgYWZ0ZXIgdGhlIGZyYW1lIHBvaW50ZXIgdG8gcmVzZXJ2ZSBzcGFjZSBmb3IgbG9jYWwgdmFyaWFibGVzCglieXRlIDB4CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MTk5CgkvLyB0YXNrID0gdGhpcy50YXNrcyh0YXNrQXBwSWQpLnZhbHVlCglieXRlIDB4NzQgLy8gInQiCglmcmFtZV9kaWcgLTEgLy8gdGFza0FwcElkOiBBcHBJRAoJaXRvYgoJY29uY2F0CglmcmFtZV9idXJ5IDAgLy8gc3RvcmFnZSBrZXkvL3Rhc2sKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyMDAKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IHRhc2suYXBwLmNyZWF0b3IpCgl0eG4gU2VuZGVyCglpbnQgOCAvLyBoZWFkT2Zmc2V0CglpbnQgOAoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0xIC8vIHRhc2tBcHBJZDogQXBwSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWFwcF9wYXJhbXNfZ2V0IEFwcENyZWF0b3IKCXBvcAoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjIwMQoJLy8gdGFzay5mZWUgPSBmZWUKCWludCAxNiAvLyBoZWFkT2Zmc2V0CglmcmFtZV9kaWcgLTIgLy8gZmVlOiB1aW50NjQKCWl0b2IKCWZyYW1lX2RpZyAwIC8vIHN0b3JhZ2Uga2V5Ly90YXNrCgljb3ZlciAyCglib3hfcmVwbGFjZQoJcmV0c3ViCgovLyB1bmZ1bmRUYXNrKHVpbnQ2NCx1aW50NjQpdm9pZAoqYWJpX3JvdXRlX3VuZnVuZFRhc2s6CgkvLyBhbW91bnQ6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgoJYnRvaQoKCS8vIHRhc2tBcHBJZDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZXhlY3V0ZSB1bmZ1bmRUYXNrKHVpbnQ2NCx1aW50NjQpdm9pZAoJY2FsbHN1YiB1bmZ1bmRUYXNrCglpbnQgMQoJcmV0dXJuCgovLyB1bmZ1bmRUYXNrKHRhc2tBcHBJZDogQXBwSUQsIGFtb3VudDogdWludDY0KTogdm9pZAovLwovLyBSZW1vdmUgZnVuZHMgZm9yIGEgdGFzawovLyBDcmVhdG9yIG9mIHRoZSB1bmRlcmx5aW5nIHRhc2sgY2FuIHJlbW92ZSB0aGUgZnVuZHMgZnJvbSB0aGUgcG9vbAovLwovLyBAcGFyYW0gdGFza0FwcElkIFRoZSBJRCBvZiB0aGUgdGFzayB0byBmdW5kCi8vIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0byB3aXRoZHJhdyBmcm9tIHRoZSBwb29sCnVuZnVuZFRhc2s6Cglwcm90byAyIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZSAweAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjIxMgoJLy8gdGFzayA9IHRoaXMudGFza3ModGFza0FwcElkKS52YWx1ZQoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0xIC8vIHRhc2tBcHBJZDogQXBwSUQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfYnVyeSAwIC8vIHN0b3JhZ2Uga2V5Ly90YXNrCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjEzCgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSB0YXNrLmFwcC5jcmVhdG9yKQoJdHhuIFNlbmRlcgoJaW50IDggLy8gaGVhZE9mZnNldAoJaW50IDgKCWJ5dGUgMHg3NCAvLyAidCIKCWZyYW1lX2RpZyAtMSAvLyB0YXNrQXBwSWQ6IEFwcElECglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9leHRyYWN0CglidG9pCglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCT09Cglhc3NlcnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyMTQKCS8vIHRhc2suZnVuZHMgLT0gYW1vdW50CglpbnQgMAoJZHVwCglpbnQgOAoJYnl0ZSAweDc0IC8vICJ0IgoJZnJhbWVfZGlnIC0xIC8vIHRhc2tBcHBJZDogQXBwSUQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWZyYW1lX2RpZyAtMiAvLyBhbW91bnQ6IHVpbnQ2NAoJLQoJaXRvYgoJZnJhbWVfZGlnIDAgLy8gc3RvcmFnZSBrZXkvL3Rhc2sKCWNvdmVyIDIKCWJveF9yZXBsYWNlCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjE1CgkvLyB0aGlzLmRlcG9zaXRlZEZ1bmRzLnZhbHVlIC09IGFtb3VudAoJYnl0ZSAweDY0IC8vICJkIgoJYXBwX2dsb2JhbF9nZXQKCWZyYW1lX2RpZyAtMiAvLyBhbW91bnQ6IHVpbnQ2NAoJLQoJYnl0ZSAweDY0IC8vICJkIgoJc3dhcAoJYXBwX2dsb2JhbF9wdXQKCgkvLyAqaWY1X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjE2CgkvLyB0aGlzLmZlZUFzc2V0SWQudmFsdWUgPT09IDAKCWJ5dGUgMHg2NjYxIC8vICJmYSIKCWFwcF9nbG9iYWxfZ2V0CglpbnQgMAoJPT0KCWJ6ICppZjVfZWxzZQoKCS8vICppZjVfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjE3CgkvLyBzZW5kUGF5bWVudCh7CgkvLyAgICAgICAgIGFtb3VudDogYW1vdW50LAoJLy8gICAgICAgICByZWNlaXZlcjogdGhpcy50eG4uc2VuZGVyLAoJLy8gICAgICAgICBmZWU6IDAsCgkvLyAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50IHBheQoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjIxOAoJLy8gYW1vdW50OiBhbW91bnQKCWZyYW1lX2RpZyAtMiAvLyBhbW91bnQ6IHVpbnQ2NAoJaXR4bl9maWVsZCBBbW91bnQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyMTkKCS8vIHJlY2VpdmVyOiB0aGlzLnR4bi5zZW5kZXIKCXR4biBTZW5kZXIKCWl0eG5fZmllbGQgUmVjZWl2ZXIKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyMjAKCS8vIGZlZTogMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoJYiAqaWY1X2VuZAoKKmlmNV9lbHNlOgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjIzCgkvLyBzZW5kQXNzZXRUcmFuc2Zlcih7CgkvLyAgICAgICAgIGFzc2V0QW1vdW50OiBhbW91bnQsCgkvLyAgICAgICAgIHhmZXJBc3NldDogQXNzZXRJRC5mcm9tVWludDY0KHRoaXMuZmVlQXNzZXRJZC52YWx1ZSksCgkvLyAgICAgICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudHhuLnNlbmRlciwKCS8vICAgICAgICAgZmVlOiAwLAoJLy8gICAgICAgfSkKCWl0eG5fYmVnaW4KCWludCBheGZlcgoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjIyNAoJLy8gYXNzZXRBbW91bnQ6IGFtb3VudAoJZnJhbWVfZGlnIC0yIC8vIGFtb3VudDogdWludDY0CglpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjI1CgkvLyB4ZmVyQXNzZXQ6IEFzc2V0SUQuZnJvbVVpbnQ2NCh0aGlzLmZlZUFzc2V0SWQudmFsdWUpCglieXRlIDB4NjY2MSAvLyAiZmEiCglhcHBfZ2xvYmFsX2dldAoJaXR4bl9maWVsZCBYZmVyQXNzZXQKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyMjYKCS8vIGFzc2V0UmVjZWl2ZXI6IHRoaXMudHhuLnNlbmRlcgoJdHhuIFNlbmRlcgoJaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjI3CgkvLyBmZWU6IDAKCWludCAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCippZjVfZW5kOgoJcmV0c3ViCgovLyBwYXltZW50KGFkZHJlc3MsdWludDY0LGFkZHJlc3Msc3RyaW5nKXZvaWQKKmFiaV9yb3V0ZV9wYXltZW50OgoJLy8gbm90ZTogc3RyaW5nCgl0eG5hIEFwcGxpY2F0aW9uQXJncyA0CglleHRyYWN0IDIgMAoKCS8vIHJlY2VpdmVyOiBhZGRyZXNzCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAzCglkdXAKCWxlbgoJaW50IDMyCgk9PQoJYXNzZXJ0CgoJLy8gYW1vdW50OiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDIKCWJ0b2kKCgkvLyBzZW5kZXI6IGFkZHJlc3MKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWR1cAoJbGVuCglpbnQgMzIKCT09Cglhc3NlcnQKCgkvLyBleGVjdXRlIHBheW1lbnQoYWRkcmVzcyx1aW50NjQsYWRkcmVzcyxzdHJpbmcpdm9pZAoJY2FsbHN1YiBwYXltZW50CglpbnQgMQoJcmV0dXJuCgovLyBwYXltZW50KHNlbmRlcjogQWRkcmVzcywgYW1vdW50OiB1aW50NjQsIHJlY2VpdmVyOiBBZGRyZXNzLCBub3RlOiBzdHJpbmcpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHNlbmQgcGF5L2F4ZmVyIHRyYW5zYWN0aW9uIG91dCBvZiB0aGUgc21hcnQgY29udHJhY3QKLy8KLy8gQHBhcmFtIHNlbmRlciBTZW5kZXIuIFRoaXMgYXBwIGlkIG9yIGFueSByZWtleWVkIGFjY291bnQgdG8gdGhlIGFkZHJlc3Mgb2YgdGhpcyBzYwovLyBAcGFyYW0gYW1vdW50IEFtb3VudAovLyBAcGFyYW0gbm90ZSBOb3RlCi8vIEBwYXJhbSByZWNlaXZlciBSZWNlaXZlcgpwYXltZW50OgoJcHJvdG8gNCAwCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjQxCgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSBnbG9iYWxzLmNyZWF0b3JBZGRyZXNzKQoJdHhuIFNlbmRlcgoJZ2xvYmFsIENyZWF0b3JBZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gKmlmNl9jb25kaXRpb24KCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI0MgoJLy8gdGhpcy5mZWVBc3NldElkLnZhbHVlID09PSAwCglieXRlIDB4NjY2MSAvLyAiZmEiCglhcHBfZ2xvYmFsX2dldAoJaW50IDAKCT09CglieiAqaWY2X2VuZAoKCS8vICppZjZfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjQ0CgkvLyBhc3NlcnQoZ2xvYmFscy5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLmJhbGFuY2UgLSBhbW91bnQgPj0gdGhpcy5kZXBvc2l0ZWRGdW5kcy52YWx1ZSkKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCglhY2N0X3BhcmFtc19nZXQgQWNjdEJhbGFuY2UKCXBvcAoJZnJhbWVfZGlnIC0yIC8vIGFtb3VudDogdWludDY0CgktCglieXRlIDB4NjQgLy8gImQiCglhcHBfZ2xvYmFsX2dldAoJPj0KCWFzc2VydAoKKmlmNl9lbmQ6CgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyNDYKCS8vIHNlbmRQYXltZW50KHsKCS8vICAgICAgIGFtb3VudDogYW1vdW50LAoJLy8gICAgICAgcmVjZWl2ZXI6IHJlY2VpdmVyLAoJLy8gICAgICAgbm90ZTogbm90ZSwKCS8vICAgICAgIHNlbmRlcjogc2VuZGVyLAoJLy8gICAgIH0pCglpdHhuX2JlZ2luCglpbnQgcGF5CglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjQ3CgkvLyBhbW91bnQ6IGFtb3VudAoJZnJhbWVfZGlnIC0yIC8vIGFtb3VudDogdWludDY0CglpdHhuX2ZpZWxkIEFtb3VudAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI0OAoJLy8gcmVjZWl2ZXI6IHJlY2VpdmVyCglmcmFtZV9kaWcgLTMgLy8gcmVjZWl2ZXI6IEFkZHJlc3MKCWl0eG5fZmllbGQgUmVjZWl2ZXIKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyNDkKCS8vIG5vdGU6IG5vdGUKCWZyYW1lX2RpZyAtNCAvLyBub3RlOiBzdHJpbmcKCWl0eG5fZmllbGQgTm90ZQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI1MAoJLy8gc2VuZGVyOiBzZW5kZXIKCWZyYW1lX2RpZyAtMSAvLyBzZW5kZXI6IEFkZHJlc3MKCWl0eG5fZmllbGQgU2VuZGVyCgoJLy8gRmVlIGZpZWxkIG5vdCBzZXQsIGRlZmF1bHRpbmcgdG8gMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoJcmV0c3ViCgovLyBhc3NldFRyYW5zZmVyKGFkZHJlc3MsdWludDY0LHVpbnQ2NCxhZGRyZXNzLHN0cmluZyl2b2lkCiphYmlfcm91dGVfYXNzZXRUcmFuc2ZlcjoKCS8vIG5vdGU6IHN0cmluZwoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQoJZXh0cmFjdCAyIDAKCgkvLyBhc3NldFJlY2VpdmVyOiBhZGRyZXNzCgl0eG5hIEFwcGxpY2F0aW9uQXJncyA0CglkdXAKCWxlbgoJaW50IDMyCgk9PQoJYXNzZXJ0CgoJLy8gYXNzZXRBbW91bnQ6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwoJYnRvaQoKCS8vIHhmZXJBc3NldDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAyCglidG9pCgoJLy8gc2VuZGVyOiBhZGRyZXNzCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglkdXAKCWxlbgoJaW50IDMyCgk9PQoJYXNzZXJ0CgoJLy8gZXhlY3V0ZSBhc3NldFRyYW5zZmVyKGFkZHJlc3MsdWludDY0LHVpbnQ2NCxhZGRyZXNzLHN0cmluZyl2b2lkCgljYWxsc3ViIGFzc2V0VHJhbnNmZXIKCWludCAxCglyZXR1cm4KCi8vIGFzc2V0VHJhbnNmZXIoc2VuZGVyOiBBZGRyZXNzLCB4ZmVyQXNzZXQ6IEFzc2V0SUQsIGFzc2V0QW1vdW50OiB1aW50NjQsIGFzc2V0UmVjZWl2ZXI6IEFkZHJlc3MsIG5vdGU6IHN0cmluZyk6IHZvaWQKLy8KLy8gQ3JlYXRvciBjYW4gc2VuZCBwYXkvYXhmZXIgdHJhbnNhY3Rpb24gb3V0IG9mIHRoZSBzbWFydCBjb250cmFjdAovLyBAcGFyYW0gc2VuZGVyIFNlbmRlci4gVGhpcyBhcHAgaWQgb3IgYW55IHJla2V5ZWQgYWNjb3VudCB0byB0aGUgYWRkcmVzcyBvZiB0aGlzIHNjCmFzc2V0VHJhbnNmZXI6Cglwcm90byA1IDAKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyNTkKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IGdsb2JhbHMuY3JlYXRvckFkZHJlc3MpCgl0eG4gU2VuZGVyCglnbG9iYWwgQ3JlYXRvckFkZHJlc3MKCT09Cglhc3NlcnQKCgkvLyAqaWY3X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjYwCgkvLyB0aGlzLmZlZUFzc2V0SWQudmFsdWUgPT09IHhmZXJBc3NldC5pZAoJYnl0ZSAweDY2NjEgLy8gImZhIgoJYXBwX2dsb2JhbF9nZXQKCWZyYW1lX2RpZyAtMiAvLyB4ZmVyQXNzZXQ6IEFzc2V0SUQKCT09CglieiAqaWY3X2VuZAoKCS8vICppZjdfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjYyCgkvLyBhc3NlcnQoZ2xvYmFscy5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLmFzc2V0QmFsYW5jZSh4ZmVyQXNzZXQpIC0gYXNzZXRBbW91bnQgPj0gdGhpcy5kZXBvc2l0ZWRGdW5kcy52YWx1ZSkKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCglmcmFtZV9kaWcgLTIgLy8geGZlckFzc2V0OiBBc3NldElECglhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKCXBvcAoJZnJhbWVfZGlnIC0zIC8vIGFzc2V0QW1vdW50OiB1aW50NjQKCS0KCWJ5dGUgMHg2NCAvLyAiZCIKCWFwcF9nbG9iYWxfZ2V0Cgk+PQoJYXNzZXJ0CgoqaWY3X2VuZDoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI2NAoJLy8gc2VuZEFzc2V0VHJhbnNmZXIoewoJLy8gICAgICAgYXNzZXRBbW91bnQ6IGFzc2V0QW1vdW50LAoJLy8gICAgICAgYXNzZXRSZWNlaXZlcjogYXNzZXRSZWNlaXZlciwKCS8vICAgICAgIHhmZXJBc3NldDogeGZlckFzc2V0LAoJLy8gICAgICAgbm90ZTogbm90ZSwKCS8vICAgICAgIGFzc2V0U2VuZGVyOiBzZW5kZXIsCgkvLyAgICAgfSkKCWl0eG5fYmVnaW4KCWludCBheGZlcgoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI2NQoJLy8gYXNzZXRBbW91bnQ6IGFzc2V0QW1vdW50CglmcmFtZV9kaWcgLTMgLy8gYXNzZXRBbW91bnQ6IHVpbnQ2NAoJaXR4bl9maWVsZCBBc3NldEFtb3VudAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI2NgoJLy8gYXNzZXRSZWNlaXZlcjogYXNzZXRSZWNlaXZlcgoJZnJhbWVfZGlnIC00IC8vIGFzc2V0UmVjZWl2ZXI6IEFkZHJlc3MKCWl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI2NwoJLy8geGZlckFzc2V0OiB4ZmVyQXNzZXQKCWZyYW1lX2RpZyAtMiAvLyB4ZmVyQXNzZXQ6IEFzc2V0SUQKCWl0eG5fZmllbGQgWGZlckFzc2V0CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6MjY4CgkvLyBub3RlOiBub3RlCglmcmFtZV9kaWcgLTUgLy8gbm90ZTogc3RyaW5nCglpdHhuX2ZpZWxkIE5vdGUKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyNjkKCS8vIGFzc2V0U2VuZGVyOiBzZW5kZXIKCWZyYW1lX2RpZyAtMSAvLyBzZW5kZXI6IEFkZHJlc3MKCWl0eG5fZmllbGQgQXNzZXRTZW5kZXIKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnQgMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CglyZXRzdWIKCi8vIHNlbmRPbmxpbmVLZXlSZWdpc3RyYXRpb24oYnl0ZVtdLGJ5dGVbXSxieXRlW10sdWludDY0LHVpbnQ2NCx1aW50NjQpdm9pZAoqYWJpX3JvdXRlX3NlbmRPbmxpbmVLZXlSZWdpc3RyYXRpb246CgkvLyB2b3RlS2V5RGlsdXRpb246IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgoJYnRvaQoKCS8vIHZvdGVMYXN0OiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDUKCWJ0b2kKCgkvLyB2b3RlRmlyc3Q6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAoJYnRvaQoKCS8vIHN0YXRlUHJvb2ZQazogYnl0ZVtdCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAzCglleHRyYWN0IDIgMAoKCS8vIHNlbGVjdGlvblBrOiBieXRlW10KCXR4bmEgQXBwbGljYXRpb25BcmdzIDIKCWV4dHJhY3QgMiAwCgoJLy8gdm90ZVBrOiBieXRlW10KCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWV4dHJhY3QgMiAwCgoJLy8gZXhlY3V0ZSBzZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uKGJ5dGVbXSxieXRlW10sYnl0ZVtdLHVpbnQ2NCx1aW50NjQsdWludDY0KXZvaWQKCWNhbGxzdWIgc2VuZE9ubGluZUtleVJlZ2lzdHJhdGlvbgoJaW50IDEKCXJldHVybgoKLy8gc2VuZE9ubGluZUtleVJlZ2lzdHJhdGlvbih2b3RlUGs6IGJ5dGVzLCBzZWxlY3Rpb25QazogYnl0ZXMsIHN0YXRlUHJvb2ZQazogYnl0ZXMsIHZvdGVGaXJzdDogdWludDY0LCB2b3RlTGFzdDogdWludDY0LCB2b3RlS2V5RGlsdXRpb246IHVpbnQ2NCk6IHZvaWQKLy8KLy8gQ3JlYXRvciBjYW4gcGVyZm9tIGtleSByZWdpc3RyYXRpb24gZm9yIHRoaXMgTFAgcG9vbApzZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uOgoJcHJvdG8gNiAwCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6Mjg0CgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSBnbG9iYWxzLmNyZWF0b3JBZGRyZXNzKQoJdHhuIFNlbmRlcgoJZ2xvYmFsIENyZWF0b3JBZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6Mjg1CgkvLyBzZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uKHsKCS8vICAgICAgIHNlbGVjdGlvblBLOiBzZWxlY3Rpb25QaywKCS8vICAgICAgIHN0YXRlUHJvb2ZQSzogc3RhdGVQcm9vZlBrLAoJLy8gICAgICAgdm90ZUZpcnN0OiB2b3RlRmlyc3QsCgkvLyAgICAgICB2b3RlS2V5RGlsdXRpb246IHZvdGVLZXlEaWx1dGlvbiwKCS8vICAgICAgIHZvdGVMYXN0OiB2b3RlTGFzdCwKCS8vICAgICAgIHZvdGVQSzogdm90ZVBrLAoJLy8gICAgICAgZmVlOiAwLAoJLy8gICAgIH0pCglpdHhuX2JlZ2luCglpbnQga2V5cmVnCglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6Mjg2CgkvLyBzZWxlY3Rpb25QSzogc2VsZWN0aW9uUGsKCWZyYW1lX2RpZyAtMiAvLyBzZWxlY3Rpb25QazogYnl0ZXMKCWl0eG5fZmllbGQgU2VsZWN0aW9uUEsKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyODcKCS8vIHN0YXRlUHJvb2ZQSzogc3RhdGVQcm9vZlBrCglmcmFtZV9kaWcgLTMgLy8gc3RhdGVQcm9vZlBrOiBieXRlcwoJaXR4bl9maWVsZCBTdGF0ZVByb29mUEsKCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czoyODgKCS8vIHZvdGVGaXJzdDogdm90ZUZpcnN0CglmcmFtZV9kaWcgLTQgLy8gdm90ZUZpcnN0OiB1aW50NjQKCWl0eG5fZmllbGQgVm90ZUZpcnN0CgoJLy8gY29udHJhY3RzXEJpYXRlY1Rhc2tNYW5hZ2VyLmFsZ28udHM6Mjg5CgkvLyB2b3RlS2V5RGlsdXRpb246IHZvdGVLZXlEaWx1dGlvbgoJZnJhbWVfZGlnIC02IC8vIHZvdGVLZXlEaWx1dGlvbjogdWludDY0CglpdHhuX2ZpZWxkIFZvdGVLZXlEaWx1dGlvbgoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI5MAoJLy8gdm90ZUxhc3Q6IHZvdGVMYXN0CglmcmFtZV9kaWcgLTUgLy8gdm90ZUxhc3Q6IHVpbnQ2NAoJaXR4bl9maWVsZCBWb3RlTGFzdAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI5MQoJLy8gdm90ZVBLOiB2b3RlUGsKCWZyYW1lX2RpZyAtMSAvLyB2b3RlUGs6IGJ5dGVzCglpdHhuX2ZpZWxkIFZvdGVQSwoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjI5MgoJLy8gZmVlOiAwCglpbnQgMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CglyZXRzdWIKCi8vIHNlbmRPZmZsaW5lS2V5UmVnaXN0cmF0aW9uKCl2b2lkCiphYmlfcm91dGVfc2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb246CgkvLyBleGVjdXRlIHNlbmRPZmZsaW5lS2V5UmVnaXN0cmF0aW9uKCl2b2lkCgljYWxsc3ViIHNlbmRPZmZsaW5lS2V5UmVnaXN0cmF0aW9uCglpbnQgMQoJcmV0dXJuCgovLyBzZW5kT2ZmbGluZUtleVJlZ2lzdHJhdGlvbigpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHBlcmZvbSBrZXkgdW5yZWdpc3RyYXRpb24gZm9yIHRoaXMgTFAgcG9vbApzZW5kT2ZmbGluZUtleVJlZ2lzdHJhdGlvbjoKCXByb3RvIDAgMAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjMwMAoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1xCaWF0ZWNUYXNrTWFuYWdlci5hbGdvLnRzOjMwMQoJLy8gc2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb24oeyBmZWU6IDAgfSkKCWl0eG5fYmVnaW4KCWludCBrZXlyZWcKCWl0eG5fZmllbGQgVHlwZUVudW0KCgkvLyBjb250cmFjdHNcQmlhdGVjVGFza01hbmFnZXIuYWxnby50czozMDEKCS8vIGZlZTogMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoJcmV0c3ViCgoqY3JlYXRlX05vT3A6CgltZXRob2QgImNyZWF0ZUFwcGxpY2F0aW9uKCl2b2lkIgoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAoJbWF0Y2ggKmFiaV9yb3V0ZV9jcmVhdGVBcHBsaWNhdGlvbgoJZXJyCgoqY2FsbF9Ob09wOgoJbWV0aG9kICJib290c3RyYXAocGF5LHVpbnQ2NCl2b2lkIgoJbWV0aG9kICJyZWdpc3RlclRhc2socGF5LCh1aW50NjQsdWludDY0LHVpbnQ2NCkpdm9pZCIKCW1ldGhvZCAidW5yZWdpc3RlclRhc2sodWludDY0LHVpbnQ2NCl2b2lkIgoJbWV0aG9kICJleGVjdXRlVGFzayhhcHBsKXZvaWQiCgltZXRob2QgImZ1bmRUYXNrKHVpbnQ2NCx0eG4pdm9pZCIKCW1ldGhvZCAiY2hhbmdlVGFza0ZlZSh1aW50NjQsdWludDY0KXZvaWQiCgltZXRob2QgInVuZnVuZFRhc2sodWludDY0LHVpbnQ2NCl2b2lkIgoJbWV0aG9kICJwYXltZW50KGFkZHJlc3MsdWludDY0LGFkZHJlc3Msc3RyaW5nKXZvaWQiCgltZXRob2QgImFzc2V0VHJhbnNmZXIoYWRkcmVzcyx1aW50NjQsdWludDY0LGFkZHJlc3Msc3RyaW5nKXZvaWQiCgltZXRob2QgInNlbmRPbmxpbmVLZXlSZWdpc3RyYXRpb24oYnl0ZVtdLGJ5dGVbXSxieXRlW10sdWludDY0LHVpbnQ2NCx1aW50NjQpdm9pZCIKCW1ldGhvZCAic2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb24oKXZvaWQiCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAwCgltYXRjaCAqYWJpX3JvdXRlX2Jvb3RzdHJhcCAqYWJpX3JvdXRlX3JlZ2lzdGVyVGFzayAqYWJpX3JvdXRlX3VucmVnaXN0ZXJUYXNrICphYmlfcm91dGVfZXhlY3V0ZVRhc2sgKmFiaV9yb3V0ZV9mdW5kVGFzayAqYWJpX3JvdXRlX2NoYW5nZVRhc2tGZWUgKmFiaV9yb3V0ZV91bmZ1bmRUYXNrICphYmlfcm91dGVfcGF5bWVudCAqYWJpX3JvdXRlX2Fzc2V0VHJhbnNmZXIgKmFiaV9yb3V0ZV9zZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uICphYmlfcm91dGVfc2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb24KCWVycgoKKmNhbGxfVXBkYXRlQXBwbGljYXRpb246CgltZXRob2QgInVwZGF0ZUFwcGxpY2F0aW9uKHN0cmluZyl2b2lkIgoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAoJbWF0Y2ggKmFiaV9yb3V0ZV91cGRhdGVBcHBsaWNhdGlvbgoJZXJy",clear:"I3ByYWdtYSB2ZXJzaW9uIDEw"},contract:{name:"BiatecTaskManager",desc:"",methods:[{name:"createApplication",desc:"Initial setup",args:[],returns:{type:"void"}},{name:"updateApplication",desc:"Creator can update application",args:[{name:"version",type:"string",desc:"App version"}],returns:{type:"void"}},{name:"bootstrap",desc:"Bootstrap the contract to optin to the fee asset and setup basic variables",args:[{name:"txBaseDeposit",type:"pay",desc:"Deposit MBR"},{name:"feeAssetId",type:"uint64",desc:"Fee asset id"}],returns:{type:"void"}},{name:"registerTask",desc:"Register a task to be executedOnly app it self can call register task",args:[{name:"registrationFeeDeposit",type:"pay",desc:"The axfer or pay that deposits the initial funds"},{name:"task",type:"(uint64,uint64,uint64)",desc:"The task object"}],returns:{type:"void"}},{name:"unregisterTask",desc:"Unregister a task when task is deleted",args:[{name:"app",type:"uint64",desc:"App to unregister"},{name:"indexToDelete",type:"uint64",desc:"App index to delete from user's apps"}],returns:{type:"void"}},{name:"executeTask",desc:"Execute a task and get the reward",args:[{name:"taskAppCall",type:"appl",desc:"The call to the task app"}],returns:{type:"void"}},{name:"fundTask",desc:"Deposit funds for a task",args:[{name:"taskAppId",type:"uint64",desc:"The ID of the task to fund"},{name:"deposit",type:"txn",desc:"The pay or axfer to fund the task"}],returns:{type:"void"}},{name:"changeTaskFee",desc:"Creator of the task is allowed to change the fee",args:[{name:"taskAppId",type:"uint64",desc:"The ID of the task to fund"},{name:"fee",type:"uint64",desc:"Fee in base units of the fee token"}],returns:{type:"void"}},{name:"unfundTask",desc:"Remove funds for a taskCreator of the underlying task can remove the funds from the pool",args:[{name:"taskAppId",type:"uint64",desc:"The ID of the task to fund"},{name:"amount",type:"uint64",desc:"The amount to withdraw from the pool"}],returns:{type:"void"}},{name:"payment",desc:"Creator can send pay/axfer transaction out of the smart contract",args:[{name:"sender",type:"address",desc:"Sender. This app id or any rekeyed account to the address of this sc"},{name:"amount",type:"uint64",desc:"Amount"},{name:"receiver",type:"address",desc:"Receiver"},{name:"note",type:"string",desc:"Note"}],returns:{type:"void"}},{name:"assetTransfer",desc:"Creator can send pay/axfer transaction out of the smart contract",args:[{name:"sender",type:"address",desc:"Sender. This app id or any rekeyed account to the address of this sc"},{name:"xferAsset",type:"uint64"},{name:"assetAmount",type:"uint64"},{name:"assetReceiver",type:"address"},{name:"note",type:"string"}],returns:{type:"void"}},{name:"sendOnlineKeyRegistration",desc:"Creator can perfom key registration for this LP pool",args:[{name:"votePk",type:"byte[]"},{name:"selectionPk",type:"byte[]"},{name:"stateProofPk",type:"byte[]"},{name:"voteFirst",type:"uint64"},{name:"voteLast",type:"uint64"},{name:"voteKeyDilution",type:"uint64"}],returns:{type:"void"}},{name:"sendOfflineKeyRegistration",desc:"Creator can perfom key unregistration for this LP pool",args:[],returns:{type:"void"}}]}},R=class{static get create(){return{createApplication(e,t={}){return p({method:"createApplication()void",methodArgs:Array.isArray(e)?e:[]},t)}}}static get update(){return{updateApplication(e,t={}){return p({method:"updateApplication(string)void",methodArgs:Array.isArray(e)?e:[e.version]},t)}}}static bootstrap(e,t){return p({method:"bootstrap(pay,uint64)void",methodArgs:Array.isArray(e)?e:[e.txBaseDeposit,e.feeAssetId]},t)}static registerTask(e,t){return p({method:"registerTask(pay,(uint64,uint64,uint64))void",methodArgs:Array.isArray(e)?e:[e.registrationFeeDeposit,e.task]},t)}static unregisterTask(e,t){return p({method:"unregisterTask(uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.app,e.indexToDelete]},t)}static executeTask(e,t){return p({method:"executeTask(appl)void",methodArgs:Array.isArray(e)?e:[e.taskAppCall]},t)}static fundTask(e,t){return p({method:"fundTask(uint64,txn)void",methodArgs:Array.isArray(e)?e:[e.taskAppId,e.deposit]},t)}static changeTaskFee(e,t){return p({method:"changeTaskFee(uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.taskAppId,e.fee]},t)}static unfundTask(e,t){return p({method:"unfundTask(uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.taskAppId,e.amount]},t)}static payment(e,t){return p({method:"payment(address,uint64,address,string)void",methodArgs:Array.isArray(e)?e:[e.sender,e.amount,e.receiver,e.note]},t)}static assetTransfer(e,t){return p({method:"assetTransfer(address,uint64,uint64,address,string)void",methodArgs:Array.isArray(e)?e:[e.sender,e.xferAsset,e.assetAmount,e.assetReceiver,e.note]},t)}static sendOnlineKeyRegistration(e,t){return p({method:"sendOnlineKeyRegistration(byte[],byte[],byte[],uint64,uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.votePk,e.selectionPk,e.stateProofPk,e.voteFirst,e.voteLast,e.voteKeyDilution]},t)}static sendOfflineKeyRegistration(e,t){return p({method:"sendOfflineKeyRegistration()void",methodArgs:Array.isArray(e)?e:[]},t)}},v=class e{constructor(e,t){this.algod=t,this.sender=e.sender,this.appClient=o.eC(u(p({},e),{app:X}),t)}mapReturnValue(e,t){var a,n,o;if(null==(a=e.return)?void 0:a.decodeError)throw e.return.decodeError;const l=void 0!==(null==(n=e.return)?void 0:n.returnValue)&&void 0!==t?t(e.return.returnValue):null==(o=e.return)?void 0:o.returnValue;return u(p({},e),{return:l})}call(e,t){return m(this,null,(function*(){return this.mapReturnValue(yield this.appClient.call(e),t)}))}deploy(e={}){var t,a;const n=null==(t=e.createCall)?void 0:t.call(e,R.create),o=null==(a=e.updateCall)?void 0:a.call(e,R.update);return this.appClient.deploy(u(p({},e),{updateArgs:o,createArgs:n,createOnCompleteAction:null==n?void 0:n.onCompleteAction}))}get create(){const e=this;return{createApplication(t){return m(this,arguments,(function*(t,a={}){return e.mapReturnValue(yield e.appClient.create(R.create.createApplication(t,a)))}))}}}get update(){const e=this;return{updateApplication(t){return m(this,arguments,(function*(t,a={}){return e.mapReturnValue(yield e.appClient.update(R.update.updateApplication(t,a)))}))}}}clearState(e={}){return this.appClient.clearState(e)}bootstrap(e,t={}){return this.call(R.bootstrap(e,t))}registerTask(e,t={}){return this.call(R.registerTask(e,t))}unregisterTask(e,t={}){return this.call(R.unregisterTask(e,t))}executeTask(e,t={}){return this.call(R.executeTask(e,t))}fundTask(e,t={}){return this.call(R.fundTask(e,t))}changeTaskFee(e,t={}){return this.call(R.changeTaskFee(e,t))}unfundTask(e,t={}){return this.call(R.unfundTask(e,t))}payment(e,t={}){return this.call(R.payment(e,t))}assetTransfer(e,t={}){return this.call(R.assetTransfer(e,t))}sendOnlineKeyRegistration(e,t={}){return this.call(R.sendOnlineKeyRegistration(e,t))}sendOfflineKeyRegistration(e,t={}){return this.call(R.sendOfflineKeyRegistration(e,t))}static getBinaryState(e,t){const a=e[t];if(a){if(!("valueRaw"in a))throw new Error(`Failed to parse state value for ${t}; received an int when expected a byte array`);return{asString(){return a.value},asByteArray(){return a.valueRaw}}}}static getIntegerState(e,t){const a=e[t];if(a){if("valueRaw"in a)throw new Error(`Failed to parse state value for ${t}; received a byte array when expected a number`);return{asBigInt(){return"bigint"===typeof a.value?a.value:BigInt(a.value)},asNumber(){return"bigint"===typeof a.value?Number(a.value):a.value}}}}getGlobalState(){return m(this,null,(function*(){const t=yield this.appClient.getGlobalState();return{get fa(){return e.getIntegerState(t,"fa")},get d(){return e.getIntegerState(t,"d")},get scver(){return e.getBinaryState(t,"scver")}}}))}compose(){const e=this,t=new n.AtomicTransactionComposer;let a=Promise.resolve();const l=[];return{bootstrap(n,o){return a=a.then((()=>e.bootstrap(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},registerTask(n,o){return a=a.then((()=>e.registerTask(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},unregisterTask(n,o){return a=a.then((()=>e.unregisterTask(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},executeTask(n,o){return a=a.then((()=>e.executeTask(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},fundTask(n,o){return a=a.then((()=>e.fundTask(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},changeTaskFee(n,o){return a=a.then((()=>e.changeTaskFee(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},unfundTask(n,o){return a=a.then((()=>e.unfundTask(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},payment(n,o){return a=a.then((()=>e.payment(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},assetTransfer(n,o){return a=a.then((()=>e.assetTransfer(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},sendOnlineKeyRegistration(n,o){return a=a.then((()=>e.sendOnlineKeyRegistration(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},sendOfflineKeyRegistration(n,o){return a=a.then((()=>e.sendOfflineKeyRegistration(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},get update(){const n=this;return{updateApplication(o,c){return a=a.then((()=>e.update.updateApplication(o,u(p({},c),{sendParams:u(p({},null==c?void 0:c.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),n}}},clearState(n){return a=a.then((()=>e.clearState(u(p({},n),{sendParams:u(p({},null==n?void 0:n.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},addTransaction(n,l){return a=a.then((()=>m(this,null,(function*(){return t.addTransaction(yield o.OO(n,null!=l?l:e.sender))})))),this},atc(){return m(this,null,(function*(){return yield a,t}))},simulate(o){return m(this,null,(function*(){var c;yield a;const r=yield t.simulate(e.algod,new n.modelsv2.SimulateRequest(p({txnGroups:[]},o)));return u(p({},r),{returns:null==(c=r.methodResults)?void 0:c.map(((e,t)=>void 0!==l[t]?l[t](e.returnValue):e.returnValue))})}))},execute(n){return m(this,null,(function*(){var c;yield a;const r=yield o.Ix({atc:t,sendParams:n},e.algod);return u(p({},r),{returns:null==(c=r.returns)?void 0:c.map(((e,t)=>void 0!==l[t]?l[t](e.returnValue):e.returnValue))})}))}}}},Y={hints:{"createApplication()void":{call_config:{no_op:"CREATE"}},"updateApplication(string,string)void":{call_config:{update_application:"CALL"}},"deleteApplication()void":{call_config:{delete_application:"CALL"}},"unregisterApplication(uint64,uint64)void":{call_config:{no_op:"CALL"}},"setPeriod(uint64)void":{call_config:{no_op:"CALL"}},"payment(uint64,address,string)void":{call_config:{no_op:"CALL"}},"assetTransfer(uint64,uint64,address,string)void":{call_config:{no_op:"CALL"}},"bootstrap(uint64,pay,string,uint64,uint64,uint64)void":{call_config:{no_op:"CALL"}},"sendOnlineKeyRegistration(byte[],byte[],byte[],uint64,uint64,uint64)void":{call_config:{no_op:"CALL"}},"sendOfflineKeyRegistration()void":{call_config:{no_op:"CALL"}},"noop()void":{call_config:{no_op:"CALL"}},"exec()void":{call_config:{no_op:"CALL"}}},bare_call_config:{no_op:"NEVER",opt_in:"NEVER",close_out:"NEVER",update_application:"NEVER",delete_application:"NEVER"},schema:{local:{declared:{},reserved:{}},global:{declared:{id:{type:"bytes",key:"id"},lastRun:{type:"uint64",key:"l"},period:{type:"uint64",key:"p"},start:{type:"uint64",key:"s"},appPoolManager:{type:"uint64",key:"pool"},version:{type:"bytes",key:"scver"}},reserved:{}}},state:{global:{num_byte_slices:2,num_uints:4},local:{num_byte_slices:0,num_uints:0}},source:{approval:"I3ByYWdtYSB2ZXJzaW9uIDEwCgovLyBUaGlzIFRFQUwgd2FzIGdlbmVyYXRlZCBieSBURUFMU2NyaXB0IHYwLjkwLjMKLy8gaHR0cHM6Ly9naXRodWIuY29tL2FsZ29yYW5kZm91bmRhdGlvbi9URUFMU2NyaXB0CgovLyBUaGlzIGNvbnRyYWN0IGlzIGNvbXBsaWFudCB3aXRoIGFuZC9vciBpbXBsZW1lbnRzIHRoZSBmb2xsb3dpbmcgQVJDczogWyBBUkM0IF0KCi8vIFRoZSBmb2xsb3dpbmcgdGVuIGxpbmVzIG9mIFRFQUwgaGFuZGxlIGluaXRpYWwgcHJvZ3JhbSBmbG93Ci8vIFRoaXMgcGF0dGVybiBpcyB1c2VkIHRvIG1ha2UgaXQgZWFzeSBmb3IgYW55b25lIHRvIHBhcnNlIHRoZSBzdGFydCBvZiB0aGUgcHJvZ3JhbSBhbmQgZGV0ZXJtaW5lIGlmIGEgc3BlY2lmaWMgYWN0aW9uIGlzIGFsbG93ZWQKLy8gSGVyZSwgYWN0aW9uIHJlZmVycyB0byB0aGUgT25Db21wbGV0ZSBpbiBjb21iaW5hdGlvbiB3aXRoIHdoZXRoZXIgdGhlIGFwcCBpcyBiZWluZyBjcmVhdGVkIG9yIGNhbGxlZAovLyBFdmVyeSBwb3NzaWJsZSBhY3Rpb24gZm9yIHRoaXMgY29udHJhY3QgaXMgcmVwcmVzZW50ZWQgaW4gdGhlIHN3aXRjaCBzdGF0ZW1lbnQKLy8gSWYgdGhlIGFjdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhlIGNvbnRyYWN0LCBpdHMgcmVzcGVjdGl2ZSBicmFuY2ggd2lsbCBiZSAiKk5PVF9JTVBMRU1FTlRFRCIgd2hpY2gganVzdCBjb250YWlucyAiZXJyIgp0eG4gQXBwbGljYXRpb25JRAohCmludCA2CioKdHhuIE9uQ29tcGxldGlvbgorCnN3aXRjaCAqY2FsbF9Ob09wICpOT1RfSU1QTEVNRU5URUQgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVEICpjYWxsX1VwZGF0ZUFwcGxpY2F0aW9uICpjYWxsX0RlbGV0ZUFwcGxpY2F0aW9uICpjcmVhdGVfTm9PcCAqTk9UX0lNUExFTUVOVEVEICpOT1RfSU1QTEVNRU5URUQgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVEICpOT1RfSU1QTEVNRU5URUQKCipOT1RfSU1QTEVNRU5URUQ6CgllcnIKCi8vIGNyZWF0ZUFwcGxpY2F0aW9uKCl2b2lkCiphYmlfcm91dGVfY3JlYXRlQXBwbGljYXRpb246CgkvLyBleGVjdXRlIGNyZWF0ZUFwcGxpY2F0aW9uKCl2b2lkCgljYWxsc3ViIGNyZWF0ZUFwcGxpY2F0aW9uCglpbnQgMQoJcmV0dXJuCgovLyBjcmVhdGVBcHBsaWNhdGlvbigpOiB2b2lkCi8vCi8vIEluaXRpYWwgc2V0dXAKY3JlYXRlQXBwbGljYXRpb246Cglwcm90byAwIDAKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czo1MQoJLy8gdGhpcy5sYXN0UnVuLnZhbHVlID0gMAoJYnl0ZSAweDZjIC8vICJsIgoJaW50IDAKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6NTIKCS8vIHRoaXMucGVyaW9kLnZhbHVlID0gMAoJYnl0ZSAweDcwIC8vICJwIgoJaW50IDAKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6NTMKCS8vIHRoaXMuc3RhcnQudmFsdWUgPSAwCglieXRlIDB4NzMgLy8gInMiCglpbnQgMAoJYXBwX2dsb2JhbF9wdXQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czo1NAoJLy8gdGhpcy52ZXJzaW9uLnZhbHVlID0gJ0JJQVRFQy1DUk9OLTAxLTAxLTAxJwoJYnl0ZSAweDczNjM3NjY1NzIgLy8gInNjdmVyIgoJYnl0ZSAweDAwMTQ0MjQ5NDE1NDQ1NDMyZDQzNTI0ZjRlMmQzMDMxMmQzMDMxMmQzMDMxCglhcHBfZ2xvYmFsX3B1dAoJcmV0c3ViCgovLyB1cGRhdGVBcHBsaWNhdGlvbihzdHJpbmcsc3RyaW5nKXZvaWQKKmFiaV9yb3V0ZV91cGRhdGVBcHBsaWNhdGlvbjoKCS8vIGlkOiBzdHJpbmcKCXR4bmEgQXBwbGljYXRpb25BcmdzIDIKCWV4dHJhY3QgMiAwCgoJLy8gdmVyc2lvbjogc3RyaW5nCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglleHRyYWN0IDIgMAoKCS8vIGV4ZWN1dGUgdXBkYXRlQXBwbGljYXRpb24oc3RyaW5nLHN0cmluZyl2b2lkCgljYWxsc3ViIHVwZGF0ZUFwcGxpY2F0aW9uCglpbnQgMQoJcmV0dXJuCgovLyB1cGRhdGVBcHBsaWNhdGlvbih2ZXJzaW9uOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHVwZGF0ZSBhcHBsaWNhdGlvbgp1cGRhdGVBcHBsaWNhdGlvbjoKCXByb3RvIDIgMAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjYxCgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSBnbG9iYWxzLmNyZWF0b3JBZGRyZXNzKQoJdHhuIFNlbmRlcgoJZ2xvYmFsIENyZWF0b3JBZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6NjIKCS8vIHRoaXMudmVyc2lvbi52YWx1ZSA9IHZlcnNpb24KCWJ5dGUgMHg3MzYzNzY2NTcyIC8vICJzY3ZlciIKCWZyYW1lX2RpZyAtMSAvLyB2ZXJzaW9uOiBzdHJpbmcKCWR1cAoJbGVuCglpdG9iCglleHRyYWN0IDYgMgoJc3dhcAoJY29uY2F0CglhcHBfZ2xvYmFsX3B1dAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjYzCgkvLyB0aGlzLmlkLnZhbHVlID0gaWQKCWJ5dGUgMHg2OTY0IC8vICJpZCIKCWZyYW1lX2RpZyAtMiAvLyBpZDogc3RyaW5nCglkdXAKCWxlbgoJaXRvYgoJZXh0cmFjdCA2IDIKCXN3YXAKCWNvbmNhdAoJYXBwX2dsb2JhbF9wdXQKCXJldHN1YgoKLy8gZGVsZXRlQXBwbGljYXRpb24oKXZvaWQKKmFiaV9yb3V0ZV9kZWxldGVBcHBsaWNhdGlvbjoKCS8vIGV4ZWN1dGUgZGVsZXRlQXBwbGljYXRpb24oKXZvaWQKCWNhbGxzdWIgZGVsZXRlQXBwbGljYXRpb24KCWludCAxCglyZXR1cm4KCi8vIGRlbGV0ZUFwcGxpY2F0aW9uKCk6IHZvaWQKLy8KLy8gQ3JlYXRvciBjYW4gZGVsZXRlIGFwcGxpY2F0aW9uCmRlbGV0ZUFwcGxpY2F0aW9uOgoJcHJvdG8gMCAwCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6NzAKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IGdsb2JhbHMuY3JlYXRvckFkZHJlc3MpCgl0eG4gU2VuZGVyCglnbG9iYWwgQ3JlYXRvckFkZHJlc3MKCT09Cglhc3NlcnQKCXJldHN1YgoKLy8gdW5yZWdpc3RlckFwcGxpY2F0aW9uKHVpbnQ2NCx1aW50NjQpdm9pZAoqYWJpX3JvdXRlX3VucmVnaXN0ZXJBcHBsaWNhdGlvbjoKCS8vIGluZGV4VG9EZWxldGU6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgoJYnRvaQoKCS8vIGFwcFBvb2xNYW5hZ2VyOiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWJ0b2kKCgkvLyBleGVjdXRlIHVucmVnaXN0ZXJBcHBsaWNhdGlvbih1aW50NjQsdWludDY0KXZvaWQKCWNhbGxzdWIgdW5yZWdpc3RlckFwcGxpY2F0aW9uCglpbnQgMQoJcmV0dXJuCgovLyB1bnJlZ2lzdGVyQXBwbGljYXRpb24oYXBwUG9vbE1hbmFnZXI6IEFwcElELCBpbmRleFRvRGVsZXRlOiB1aW50NjQpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHVucmVnaXN0ZXJBcHBsaWNhdGlvbiBiZWZvcmUgaGUgZGVsZXRlcyBpdAovLwovLyBAcGFyYW0gYXBwUG9vbE1hbmFnZXIgUG9vbCBtYW5hZ2VyIHdoZXJlIHRoZSB0YXNrIGlzIHJlZ2lzdGVyZWQKLy8gQHBhcmFtIGluZGV4VG9EZWxldGUgQXBwIGluZGV4IHRvIGRlbGV0ZSBmcm9tIHVzZXIncyBhcHBzCnVucmVnaXN0ZXJBcHBsaWNhdGlvbjoKCXByb3RvIDIgMAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjgwCgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSBnbG9iYWxzLmNyZWF0b3JBZGRyZXNzKQoJdHhuIFNlbmRlcgoJZ2xvYmFsIENyZWF0b3JBZGRyZXNzCgk9PQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6ODEKCS8vIGFzc2VydCh0aGlzLmFwcFBvb2xNYW5hZ2VyLnZhbHVlID09PSBhcHBQb29sTWFuYWdlcikKCWJ5dGUgMHg3MDZmNmY2YyAvLyAicG9vbCIKCWFwcF9nbG9iYWxfZ2V0CglmcmFtZV9kaWcgLTEgLy8gYXBwUG9vbE1hbmFnZXI6IEFwcElECgk9PQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6ODIKCS8vIHNlbmRNZXRob2RDYWxsPFtBcHBJRCwgdWludDY0XSwgdm9pZD4oewoJLy8gICAgICAgbmFtZTogJ3VucmVnaXN0ZXJUYXNrJywKCS8vICAgICAgIG1ldGhvZEFyZ3M6IFtnbG9iYWxzLmN1cnJlbnRBcHBsaWNhdGlvbklELCBpbmRleFRvRGVsZXRlXSwKCS8vICAgICAgIGFwcGxpY2F0aW9uSUQ6IGFwcFBvb2xNYW5hZ2VyLAoJLy8gICAgICAgZmVlOiAwLAoJLy8gICAgIH0pCglpdHhuX2JlZ2luCglpbnQgYXBwbAoJaXR4bl9maWVsZCBUeXBlRW51bQoJbWV0aG9kICJ1bnJlZ2lzdGVyVGFzayh1aW50NjQsdWludDY0KXZvaWQiCglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjg0CgkvLyBtZXRob2RBcmdzOiBbZ2xvYmFscy5jdXJyZW50QXBwbGljYXRpb25JRCwgaW5kZXhUb0RlbGV0ZV0KCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25JRAoJaXRvYgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCWZyYW1lX2RpZyAtMiAvLyBpbmRleFRvRGVsZXRlOiB1aW50NjQKCWl0b2IKCWl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6ODUKCS8vIGFwcGxpY2F0aW9uSUQ6IGFwcFBvb2xNYW5hZ2VyCglmcmFtZV9kaWcgLTEgLy8gYXBwUG9vbE1hbmFnZXI6IEFwcElECglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czo4NgoJLy8gZmVlOiAwCglpbnQgMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CglyZXRzdWIKCi8vIHNldFBlcmlvZCh1aW50NjQpdm9pZAoqYWJpX3JvdXRlX3NldFBlcmlvZDoKCS8vIHBlcmlvZDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZXhlY3V0ZSBzZXRQZXJpb2QodWludDY0KXZvaWQKCWNhbGxzdWIgc2V0UGVyaW9kCglpbnQgMQoJcmV0dXJuCgovLyBzZXRQZXJpb2QocGVyaW9kOiB1aW50NjQpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIGNoYW5nZSB0aGUgcGVyaW9kIGhvdyBvZnRlciB0aGUgc2NyaXB0IGNhbiBiZSBleGVjdXRlZCBieSBleGVjdXRvcnMKLy8KLy8gQHBhcmFtIHBlcmlvZCBQZXJpb2QgaW4gc2Vjb25kcwpzZXRQZXJpb2Q6Cglwcm90byAxIDAKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czo5NgoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjk3CgkvLyB0aGlzLnBlcmlvZC52YWx1ZSA9IHBlcmlvZAoJYnl0ZSAweDcwIC8vICJwIgoJZnJhbWVfZGlnIC0xIC8vIHBlcmlvZDogdWludDY0CglhcHBfZ2xvYmFsX3B1dAoJcmV0c3ViCgovLyBwYXltZW50KHVpbnQ2NCxhZGRyZXNzLHN0cmluZyl2b2lkCiphYmlfcm91dGVfcGF5bWVudDoKCS8vIG5vdGU6IHN0cmluZwoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwoJZXh0cmFjdCAyIDAKCgkvLyByZWNlaXZlcjogYWRkcmVzcwoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgoJZHVwCglsZW4KCWludCAzMgoJPT0KCWFzc2VydAoKCS8vIGFtb3VudDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZXhlY3V0ZSBwYXltZW50KHVpbnQ2NCxhZGRyZXNzLHN0cmluZyl2b2lkCgljYWxsc3ViIHBheW1lbnQKCWludCAxCglyZXR1cm4KCi8vIHBheW1lbnQoYW1vdW50OiB1aW50NjQsIHJlY2VpdmVyOiBBZGRyZXNzLCBub3RlOiBzdHJpbmcpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHNlbmQgcGF5L2F4ZmVyIHRyYW5zYWN0aW9uIG91dCBvZiB0aGUgc21hcnQgY29udHJhY3QKLy8KLy8gQHBhcmFtIGFtb3VudCBBbW91bnQKLy8gQHBhcmFtIG5vdGUgTm90ZQovLyBAcGFyYW0gcmVjZWl2ZXIgUmVjZWl2ZXIKcGF5bWVudDoKCXByb3RvIDMgMAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjEwOAoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjEwOQoJLy8gc2VuZFBheW1lbnQoewoJLy8gICAgICAgYW1vdW50OiBhbW91bnQsCgkvLyAgICAgICByZWNlaXZlcjogcmVjZWl2ZXIsCgkvLyAgICAgICBub3RlOiBub3RlLAoJLy8gICAgIH0pCglpdHhuX2JlZ2luCglpbnQgcGF5CglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTEwCgkvLyBhbW91bnQ6IGFtb3VudAoJZnJhbWVfZGlnIC0xIC8vIGFtb3VudDogdWludDY0CglpdHhuX2ZpZWxkIEFtb3VudAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjExMQoJLy8gcmVjZWl2ZXI6IHJlY2VpdmVyCglmcmFtZV9kaWcgLTIgLy8gcmVjZWl2ZXI6IEFkZHJlc3MKCWl0eG5fZmllbGQgUmVjZWl2ZXIKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxMTIKCS8vIG5vdGU6IG5vdGUKCWZyYW1lX2RpZyAtMyAvLyBub3RlOiBzdHJpbmcKCWl0eG5fZmllbGQgTm90ZQoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludCAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxMTQKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IGdsb2JhbHMuY3JlYXRvckFkZHJlc3MpCgl0eG4gU2VuZGVyCglnbG9iYWwgQ3JlYXRvckFkZHJlc3MKCT09Cglhc3NlcnQKCXJldHN1YgoKLy8gYXNzZXRUcmFuc2Zlcih1aW50NjQsdWludDY0LGFkZHJlc3Msc3RyaW5nKXZvaWQKKmFiaV9yb3V0ZV9hc3NldFRyYW5zZmVyOgoJLy8gbm90ZTogc3RyaW5nCgl0eG5hIEFwcGxpY2F0aW9uQXJncyA0CglleHRyYWN0IDIgMAoKCS8vIGFzc2V0UmVjZWl2ZXI6IGFkZHJlc3MKCXR4bmEgQXBwbGljYXRpb25BcmdzIDMKCWR1cAoJbGVuCglpbnQgMzIKCT09Cglhc3NlcnQKCgkvLyBhc3NldEFtb3VudDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAyCglidG9pCgoJLy8geGZlckFzc2V0OiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWJ0b2kKCgkvLyBleGVjdXRlIGFzc2V0VHJhbnNmZXIodWludDY0LHVpbnQ2NCxhZGRyZXNzLHN0cmluZyl2b2lkCgljYWxsc3ViIGFzc2V0VHJhbnNmZXIKCWludCAxCglyZXR1cm4KCi8vIGFzc2V0VHJhbnNmZXIoeGZlckFzc2V0OiBBc3NldElELCBhc3NldEFtb3VudDogdWludDY0LCBhc3NldFJlY2VpdmVyOiBBZGRyZXNzLCBub3RlOiBzdHJpbmcpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHNlbmQgcGF5L2F4ZmVyIHRyYW5zYWN0aW9uIG91dCBvZiB0aGUgc21hcnQgY29udHJhY3QKLy8gQHBhcmFtIHhmZXJBc3NldCBBc3NldCBpZAovLyBAcGFyYW0gYXNzZXRBbW91bnQgQW1vdW50Ci8vIEBwYXJhbSBub3RlIE5vdGUKLy8gQHBhcmFtIGFzc2V0UmVjZWl2ZXIgUmVjZWl2ZXIKYXNzZXRUcmFuc2ZlcjoKCXByb3RvIDQgMAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjEyNQoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjEyNgoJLy8gc2VuZEFzc2V0VHJhbnNmZXIoewoJLy8gICAgICAgYXNzZXRBbW91bnQ6IGFzc2V0QW1vdW50LAoJLy8gICAgICAgYXNzZXRSZWNlaXZlcjogYXNzZXRSZWNlaXZlciwKCS8vICAgICAgIHhmZXJBc3NldDogeGZlckFzc2V0LAoJLy8gICAgICAgbm90ZTogbm90ZSwKCS8vICAgICB9KQoJaXR4bl9iZWdpbgoJaW50IGF4ZmVyCglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTI3CgkvLyBhc3NldEFtb3VudDogYXNzZXRBbW91bnQKCWZyYW1lX2RpZyAtMiAvLyBhc3NldEFtb3VudDogdWludDY0CglpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTI4CgkvLyBhc3NldFJlY2VpdmVyOiBhc3NldFJlY2VpdmVyCglmcmFtZV9kaWcgLTMgLy8gYXNzZXRSZWNlaXZlcjogQWRkcmVzcwoJaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTI5CgkvLyB4ZmVyQXNzZXQ6IHhmZXJBc3NldAoJZnJhbWVfZGlnIC0xIC8vIHhmZXJBc3NldDogQXNzZXRJRAoJaXR4bl9maWVsZCBYZmVyQXNzZXQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxMzAKCS8vIG5vdGU6IG5vdGUKCWZyYW1lX2RpZyAtNCAvLyBub3RlOiBzdHJpbmcKCWl0eG5fZmllbGQgTm90ZQoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludCAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCXJldHN1YgoKLy8gYm9vdHN0cmFwKHVpbnQ2NCxwYXksc3RyaW5nLHVpbnQ2NCx1aW50NjQsdWludDY0KXZvaWQKKmFiaV9yb3V0ZV9ib290c3RyYXA6CgkvLyBmZWU6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQoJYnRvaQoKCS8vIHN0YXJ0OiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDQKCWJ0b2kKCgkvLyBwZXJpb2Q6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwoJYnRvaQoKCS8vIGlkOiBzdHJpbmcKCXR4bmEgQXBwbGljYXRpb25BcmdzIDIKCWV4dHJhY3QgMiAwCgoJLy8gdHhCYXNlRGVwb3NpdDogcGF5Cgl0eG4gR3JvdXBJbmRleAoJaW50IDEKCS0KCWR1cAoJZ3R4bnMgVHlwZUVudW0KCWludCBwYXkKCT09Cglhc3NlcnQKCgkvLyBhcHBQb29sTWFuYWdlcjogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZXhlY3V0ZSBib290c3RyYXAodWludDY0LHBheSxzdHJpbmcsdWludDY0LHVpbnQ2NCx1aW50NjQpdm9pZAoJY2FsbHN1YiBib290c3RyYXAKCWludCAxCglyZXR1cm4KCi8vIGJvb3RzdHJhcChhcHBQb29sTWFuYWdlcjogQXBwSUQsIHR4QmFzZURlcG9zaXQ6IFBheVR4biwgaWQ6IHN0cmluZywgcGVyaW9kOiB1aW50NjQsIHN0YXJ0OiB1aW50NjQsIGZlZTogdWludDY0KTogdm9pZAovLwovLyBCb290c3RyYXAgdGhlIGNvbnRyYWN0IHRvIG9wdGluIHRvIHRoZSBmZWUgYXNzZXQgYW5kIHNldHVwIGJhc2ljIHZhcmlhYmxlcwovLwovLyBAcGFyYW0gYXBwUG9vbE1hbmFnZXIgVGFza3MgUG9vbCBtYW5hZ2VyIGFwcAovLyBAcGFyYW0gdHhCYXNlRGVwb3NpdCBEZXBvc2l0IE1CUgovLyBAcGFyYW0gaWQgSGFzaCBpZCBvZiB0aGUgaW5wdXQgYXBwCi8vIEBwYXJhbSBwZXJpb2QgIFBlcmlvZCBpbiBzZWNvbmRzIGhvdyBvZnRlbiB0aGlzIHNtYXJ0IGNvbnRyYWN0IGNhbiBiZSBydW4KLy8gQHBhcmFtIHN0YXJ0IFN0YXJ0IHRpbWUgaW4gdW5peCB0aW1lc3RhbXAgc2Vjb25kcy4gQ29udHJhY3QgY2FuIGJlIGV4ZWN0dXRlZCB3aGVuIE1hdGguZmxvb3IoKGN1cnJlbnRUaW1lICsgc3RhcnQpIC8gcGVyaW9kKSA+IE1hdGguZmxvb3IoKGxhc3RSdW4gKyBzdGFydCkgLyBwZXJpb2QpCi8vIEBwYXJhbSBmZWUgRXhlY3V0aW9uIGZlZSBmb3IgdGhlIHRhc2sKYm9vdHN0cmFwOgoJcHJvdG8gNiAwCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGUgMHgKCWR1cAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjE1MgoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjE1MwoJLy8gdmVyaWZ5UGF5VHhuKHR4QmFzZURlcG9zaXQsIHsKCS8vICAgICAgIHJlY2VpdmVyOiB0aGlzLmFwcC5hZGRyZXNzLAoJLy8gICAgICAgYW1vdW50OiB7IGdyZWF0ZXJUaGFuRXF1YWxUbzogMCB9LAoJLy8gICAgIH0pCgkvLyB2ZXJpZnkgcmVjZWl2ZXIKCWZyYW1lX2RpZyAtMiAvLyB0eEJhc2VEZXBvc2l0OiBQYXlUeG4KCWd0eG5zIFJlY2VpdmVyCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIHZlcmlmeSBhbW91bnQKCWZyYW1lX2RpZyAtMiAvLyB0eEJhc2VEZXBvc2l0OiBQYXlUeG4KCWd0eG5zIEFtb3VudAoJaW50IDAKCT49Cglhc3NlcnQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNTgKCS8vIGtlZXAgPSAxMDAwMDAKCWludCAxMDAwMDAKCWZyYW1lX2J1cnkgMCAvLyBrZWVwOiB1aW50NjQKCgkvLyAqaWYwX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTU5CgkvLyBnbG9iYWxzLm1pbkJhbGFuY2UgPiBrZWVwCglnbG9iYWwgTWluQmFsYW5jZQoJZnJhbWVfZGlnIDAgLy8ga2VlcDogdWludDY0Cgk+CglieiAqaWYwX2VuZAoKCS8vICppZjBfY29uc2VxdWVudAoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTU5CgkvLyBrZWVwID0gZ2xvYmFscy5taW5CYWxhbmNlCglnbG9iYWwgTWluQmFsYW5jZQoJZnJhbWVfYnVyeSAwIC8vIGtlZXA6IHVpbnQ2NAoKKmlmMF9lbmQ6CgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNjMKCS8vIHRhc2s6IFRhc2sgPSB7CgkvLyAgICAgICBhcHA6IGdsb2JhbHMuY3VycmVudEFwcGxpY2F0aW9uSUQsCgkvLyAgICAgICBmZWU6IGZlZSwKCS8vICAgICAgIGZ1bmRzOiAwLAoJLy8gICAgIH0KCWJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uSUQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfZGlnIC02IC8vIGZlZTogdWludDY0CglpdG9iCgljb25jYXQKCWZyYW1lX2J1cnkgMSAvLyB0YXNrOiBUYXNrCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTY5CgkvLyBzZW5kTWV0aG9kQ2FsbDxbUGF5VHhuLCBUYXNrXSwgdm9pZD4oewoJLy8gICAgICAgbmFtZTogJ3JlZ2lzdGVyVGFzaycsCgkvLyAgICAgICBtZXRob2RBcmdzOiBbCgkvLyAgICAgICAgIHsKCS8vICAgICAgICAgICBhbW91bnQ6IGdsb2JhbHMuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcy5iYWxhbmNlIC0ga2VlcCwKCS8vICAgICAgICAgICBub3RlOiAncmVnJywKCS8vICAgICAgICAgICByZWNlaXZlcjogYXBwUG9vbE1hbmFnZXIuYWRkcmVzcywKCS8vICAgICAgICAgICBmZWU6IDAsCgkvLyAgICAgICAgIH0sCgkvLyAgICAgICAgIHRhc2ssCgkvLyAgICAgICBdLAoJLy8gICAgICAgYXBwbGljYXRpb25JRDogYXBwUG9vbE1hbmFnZXIsCgkvLyAgICAgICBmZWU6IDAsCgkvLyAgICAgfSkKCWl0eG5fYmVnaW4KCWludCBwYXkKCWl0eG5fZmllbGQgVHlwZUVudW0KCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNzMKCS8vIGFtb3VudDogZ2xvYmFscy5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLmJhbGFuY2UgLSBrZWVwCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJYWNjdF9wYXJhbXNfZ2V0IEFjY3RCYWxhbmNlCglwb3AKCWZyYW1lX2RpZyAwIC8vIGtlZXA6IHVpbnQ2NAoJLQoJaXR4bl9maWVsZCBBbW91bnQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNzQKCS8vIG5vdGU6ICdyZWcnCglieXRlIDB4NzI2NTY3IC8vICJyZWciCglpdHhuX2ZpZWxkIE5vdGUKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNzUKCS8vIHJlY2VpdmVyOiBhcHBQb29sTWFuYWdlci5hZGRyZXNzCglmcmFtZV9kaWcgLTEgLy8gYXBwUG9vbE1hbmFnZXI6IEFwcElECglhcHBfcGFyYW1zX2dldCBBcHBBZGRyZXNzCglwb3AKCWl0eG5fZmllbGQgUmVjZWl2ZXIKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNzYKCS8vIGZlZTogMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCglpdHhuX25leHQKCWludCBhcHBsCglpdHhuX2ZpZWxkIFR5cGVFbnVtCgltZXRob2QgInJlZ2lzdGVyVGFzayhwYXksKHVpbnQ2NCx1aW50NjQsdWludDY0KSl2b2lkIgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxNzEKCS8vIG1ldGhvZEFyZ3M6IFsKCS8vICAgICAgICAgewoJLy8gICAgICAgICAgIGFtb3VudDogZ2xvYmFscy5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLmJhbGFuY2UgLSBrZWVwLAoJLy8gICAgICAgICAgIG5vdGU6ICdyZWcnLAoJLy8gICAgICAgICAgIHJlY2VpdmVyOiBhcHBQb29sTWFuYWdlci5hZGRyZXNzLAoJLy8gICAgICAgICAgIGZlZTogMCwKCS8vICAgICAgICAgfSwKCS8vICAgICAgICAgdGFzaywKCS8vICAgICAgIF0KCWZyYW1lX2RpZyAxIC8vIHRhc2s6IFRhc2sKCWl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTgwCgkvLyBhcHBsaWNhdGlvbklEOiBhcHBQb29sTWFuYWdlcgoJZnJhbWVfZGlnIC0xIC8vIGFwcFBvb2xNYW5hZ2VyOiBBcHBJRAoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTgxCgkvLyBmZWU6IDAKCWludCAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxODQKCS8vIGFzc2VydChwZXJpb2QgPiAwKQoJZnJhbWVfZGlnIC00IC8vIHBlcmlvZDogdWludDY0CglpbnQgMAoJPgoJYXNzZXJ0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTg1CgkvLyB0aGlzLmlkLnZhbHVlID0gaWQKCWJ5dGUgMHg2OTY0IC8vICJpZCIKCWZyYW1lX2RpZyAtMyAvLyBpZDogc3RyaW5nCglkdXAKCWxlbgoJaXRvYgoJZXh0cmFjdCA2IDIKCXN3YXAKCWNvbmNhdAoJYXBwX2dsb2JhbF9wdXQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoxODYKCS8vIHRoaXMucGVyaW9kLnZhbHVlID0gcGVyaW9kCglieXRlIDB4NzAgLy8gInAiCglmcmFtZV9kaWcgLTQgLy8gcGVyaW9kOiB1aW50NjQKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MTg3CgkvLyB0aGlzLnN0YXJ0LnZhbHVlID0gc3RhcnQKCWJ5dGUgMHg3MyAvLyAicyIKCWZyYW1lX2RpZyAtNSAvLyBzdGFydDogdWludDY0CglhcHBfZ2xvYmFsX3B1dAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjE4OAoJLy8gdGhpcy5hcHBQb29sTWFuYWdlci52YWx1ZSA9IGFwcFBvb2xNYW5hZ2VyCglieXRlIDB4NzA2ZjZmNmMgLy8gInBvb2wiCglmcmFtZV9kaWcgLTEgLy8gYXBwUG9vbE1hbmFnZXI6IEFwcElECglhcHBfZ2xvYmFsX3B1dAoJcmV0c3ViCgovLyBzZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uKGJ5dGVbXSxieXRlW10sYnl0ZVtdLHVpbnQ2NCx1aW50NjQsdWludDY0KXZvaWQKKmFiaV9yb3V0ZV9zZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uOgoJLy8gdm90ZUtleURpbHV0aW9uOiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDYKCWJ0b2kKCgkvLyB2b3RlTGFzdDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyA1CglidG9pCgoJLy8gdm90ZUZpcnN0OiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDQKCWJ0b2kKCgkvLyBzdGF0ZVByb29mUGs6IGJ5dGVbXQoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwoJZXh0cmFjdCAyIDAKCgkvLyBzZWxlY3Rpb25QazogYnl0ZVtdCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAyCglleHRyYWN0IDIgMAoKCS8vIHZvdGVQazogYnl0ZVtdCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglleHRyYWN0IDIgMAoKCS8vIGV4ZWN1dGUgc2VuZE9ubGluZUtleVJlZ2lzdHJhdGlvbihieXRlW10sYnl0ZVtdLGJ5dGVbXSx1aW50NjQsdWludDY0LHVpbnQ2NCl2b2lkCgljYWxsc3ViIHNlbmRPbmxpbmVLZXlSZWdpc3RyYXRpb24KCWludCAxCglyZXR1cm4KCi8vIHNlbmRPbmxpbmVLZXlSZWdpc3RyYXRpb24odm90ZVBrOiBieXRlcywgc2VsZWN0aW9uUGs6IGJ5dGVzLCBzdGF0ZVByb29mUGs6IGJ5dGVzLCB2b3RlRmlyc3Q6IHVpbnQ2NCwgdm90ZUxhc3Q6IHVpbnQ2NCwgdm90ZUtleURpbHV0aW9uOiB1aW50NjQpOiB2b2lkCi8vCi8vIENyZWF0b3IgY2FuIHBlcmZvbSBrZXkgcmVnaXN0cmF0aW9uIGZvciB0aGlzIExQIHBvb2wKc2VuZE9ubGluZUtleVJlZ2lzdHJhdGlvbjoKCXByb3RvIDYgMAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjIwMgoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gZ2xvYmFscy5jcmVhdG9yQWRkcmVzcykKCXR4biBTZW5kZXIKCWdsb2JhbCBDcmVhdG9yQWRkcmVzcwoJPT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjIwMwoJLy8gc2VuZE9ubGluZUtleVJlZ2lzdHJhdGlvbih7CgkvLyAgICAgICBzZWxlY3Rpb25QSzogc2VsZWN0aW9uUGssCgkvLyAgICAgICBzdGF0ZVByb29mUEs6IHN0YXRlUHJvb2ZQaywKCS8vICAgICAgIHZvdGVGaXJzdDogdm90ZUZpcnN0LAoJLy8gICAgICAgdm90ZUtleURpbHV0aW9uOiB2b3RlS2V5RGlsdXRpb24sCgkvLyAgICAgICB2b3RlTGFzdDogdm90ZUxhc3QsCgkvLyAgICAgICB2b3RlUEs6IHZvdGVQaywKCS8vICAgICAgIGZlZTogMCwKCS8vICAgICB9KQoJaXR4bl9iZWdpbgoJaW50IGtleXJlZwoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjIwNAoJLy8gc2VsZWN0aW9uUEs6IHNlbGVjdGlvblBrCglmcmFtZV9kaWcgLTIgLy8gc2VsZWN0aW9uUGs6IGJ5dGVzCglpdHhuX2ZpZWxkIFNlbGVjdGlvblBLCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MjA1CgkvLyBzdGF0ZVByb29mUEs6IHN0YXRlUHJvb2ZQawoJZnJhbWVfZGlnIC0zIC8vIHN0YXRlUHJvb2ZQazogYnl0ZXMKCWl0eG5fZmllbGQgU3RhdGVQcm9vZlBLCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MjA2CgkvLyB2b3RlRmlyc3Q6IHZvdGVGaXJzdAoJZnJhbWVfZGlnIC00IC8vIHZvdGVGaXJzdDogdWludDY0CglpdHhuX2ZpZWxkIFZvdGVGaXJzdAoKCS8vIGNvbnRyYWN0c1x0ZW1wbGF0ZS5hbGdvLnRzOjIwNwoJLy8gdm90ZUtleURpbHV0aW9uOiB2b3RlS2V5RGlsdXRpb24KCWZyYW1lX2RpZyAtNiAvLyB2b3RlS2V5RGlsdXRpb246IHVpbnQ2NAoJaXR4bl9maWVsZCBWb3RlS2V5RGlsdXRpb24KCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMDgKCS8vIHZvdGVMYXN0OiB2b3RlTGFzdAoJZnJhbWVfZGlnIC01IC8vIHZvdGVMYXN0OiB1aW50NjQKCWl0eG5fZmllbGQgVm90ZUxhc3QKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMDkKCS8vIHZvdGVQSzogdm90ZVBrCglmcmFtZV9kaWcgLTEgLy8gdm90ZVBrOiBieXRlcwoJaXR4bl9maWVsZCBWb3RlUEsKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMTAKCS8vIGZlZTogMAoJaW50IDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoJcmV0c3ViCgovLyBzZW5kT2ZmbGluZUtleVJlZ2lzdHJhdGlvbigpdm9pZAoqYWJpX3JvdXRlX3NlbmRPZmZsaW5lS2V5UmVnaXN0cmF0aW9uOgoJLy8gZXhlY3V0ZSBzZW5kT2ZmbGluZUtleVJlZ2lzdHJhdGlvbigpdm9pZAoJY2FsbHN1YiBzZW5kT2ZmbGluZUtleVJlZ2lzdHJhdGlvbgoJaW50IDEKCXJldHVybgoKLy8gc2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb24oKTogdm9pZAovLwovLyBDcmVhdG9yIGNhbiBwZXJmb20ga2V5IHVucmVnaXN0cmF0aW9uIGZvciB0aGlzIExQIHBvb2wKc2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb246Cglwcm90byAwIDAKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMTgKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IGdsb2JhbHMuY3JlYXRvckFkZHJlc3MpCgl0eG4gU2VuZGVyCglnbG9iYWwgQ3JlYXRvckFkZHJlc3MKCT09Cglhc3NlcnQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMTkKCS8vIHNlbmRPZmZsaW5lS2V5UmVnaXN0cmF0aW9uKHsgZmVlOiAwIH0pCglpdHhuX2JlZ2luCglpbnQga2V5cmVnCglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MjE5CgkvLyBmZWU6IDAKCWludCAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCXJldHN1YgoKLy8gbm9vcCgpdm9pZAoqYWJpX3JvdXRlX25vb3A6CgkvLyBleGVjdXRlIG5vb3AoKXZvaWQKCWNhbGxzdWIgbm9vcAoJaW50IDEKCXJldHVybgoKLy8gbm9vcCgpOiB2b2lkCi8vCi8vIE5vIG9wLCBmb3IgcHVycG9zZSBvZiBhZGRpbmcgZXh0cmEgcmVzb3VyY2VzIHRvIHRoZSB0eCBncm91cApub29wOgoJcHJvdG8gMCAwCgoJLy8gY29udHJhY3RzXHRlbXBsYXRlLmFsZ28udHM6MjI2CgkvLyBsb2coJzEnKQoJYnl0ZSAweDMxIC8vICIxIgoJbG9nCglyZXRzdWIKCi8vIGV4ZWMoKXZvaWQKKmFiaV9yb3V0ZV9leGVjOgoJLy8gZXhlY3V0ZSBleGVjKCl2b2lkCgljYWxsc3ViIGV4ZWMKCWludCAxCglyZXR1cm4KCi8vIGV4ZWMoKTogdm9pZAovLwovLyBBbnlvbmUgY2FuIGV4ZWN1dGUgdGhpcyBzY2hlZHVsZXIgbWV0aG9kIHdoZW4gdGltZSBpcyByaWdodCBhbmQgaGUgd2lsbCBiZSByZXdhcmRlZCB0aGUgZmVlCmV4ZWM6Cglwcm90byAwIDAKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMzMKCS8vIGFzc2VydCh0aGlzLnN0YXJ0LnZhbHVlIDw9IGdsb2JhbHMubGF0ZXN0VGltZXN0YW1wLCAnRVJSX05PX1NUQVJUX1lFVCcpCglieXRlIDB4NzMgLy8gInMiCglhcHBfZ2xvYmFsX2dldAoJZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAoJPD0KCgkvLyBFUlJfTk9fU1RBUlRfWUVUCglhc3NlcnQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMzQKCS8vIGFzc2VydCgKCS8vICAgICAgIChnbG9iYWxzLmxhdGVzdFRpbWVzdGFtcCArIHRoaXMuc3RhcnQudmFsdWUpIC8gdGhpcy5wZXJpb2QudmFsdWUgPgoJLy8gICAgICAgICAodGhpcy5sYXN0UnVuLnZhbHVlICsgdGhpcy5zdGFydC52YWx1ZSkgLyB0aGlzLnBlcmlvZC52YWx1ZSwKCS8vICAgICAgICdFUlJfTk9fVElNRV9ZRVQnCgkvLyAgICAgKQoJZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAoJYnl0ZSAweDczIC8vICJzIgoJYXBwX2dsb2JhbF9nZXQKCSsKCWJ5dGUgMHg3MCAvLyAicCIKCWFwcF9nbG9iYWxfZ2V0CgkvCglieXRlIDB4NmMgLy8gImwiCglhcHBfZ2xvYmFsX2dldAoJYnl0ZSAweDczIC8vICJzIgoJYXBwX2dsb2JhbF9nZXQKCSsKCWJ5dGUgMHg3MCAvLyAicCIKCWFwcF9nbG9iYWxfZ2V0CgkvCgk+CgoJLy8gRVJSX05PX1RJTUVfWUVUCglhc3NlcnQKCgkvLyBjb250cmFjdHNcdGVtcGxhdGUuYWxnby50czoyMzkKCS8vIHRoaXMubGFzdFJ1bi52YWx1ZSA9IGdsb2JhbHMubGF0ZXN0VGltZXN0YW1wCglieXRlIDB4NmMgLy8gImwiCglnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCglhcHBfZ2xvYmFsX3B1dAoJcmV0c3ViCgoqY3JlYXRlX05vT3A6CgltZXRob2QgImNyZWF0ZUFwcGxpY2F0aW9uKCl2b2lkIgoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAoJbWF0Y2ggKmFiaV9yb3V0ZV9jcmVhdGVBcHBsaWNhdGlvbgoJZXJyCgoqY2FsbF9Ob09wOgoJbWV0aG9kICJ1bnJlZ2lzdGVyQXBwbGljYXRpb24odWludDY0LHVpbnQ2NCl2b2lkIgoJbWV0aG9kICJzZXRQZXJpb2QodWludDY0KXZvaWQiCgltZXRob2QgInBheW1lbnQodWludDY0LGFkZHJlc3Msc3RyaW5nKXZvaWQiCgltZXRob2QgImFzc2V0VHJhbnNmZXIodWludDY0LHVpbnQ2NCxhZGRyZXNzLHN0cmluZyl2b2lkIgoJbWV0aG9kICJib290c3RyYXAodWludDY0LHBheSxzdHJpbmcsdWludDY0LHVpbnQ2NCx1aW50NjQpdm9pZCIKCW1ldGhvZCAic2VuZE9ubGluZUtleVJlZ2lzdHJhdGlvbihieXRlW10sYnl0ZVtdLGJ5dGVbXSx1aW50NjQsdWludDY0LHVpbnQ2NCl2b2lkIgoJbWV0aG9kICJzZW5kT2ZmbGluZUtleVJlZ2lzdHJhdGlvbigpdm9pZCIKCW1ldGhvZCAibm9vcCgpdm9pZCIKCW1ldGhvZCAiZXhlYygpdm9pZCIKCXR4bmEgQXBwbGljYXRpb25BcmdzIDAKCW1hdGNoICphYmlfcm91dGVfdW5yZWdpc3RlckFwcGxpY2F0aW9uICphYmlfcm91dGVfc2V0UGVyaW9kICphYmlfcm91dGVfcGF5bWVudCAqYWJpX3JvdXRlX2Fzc2V0VHJhbnNmZXIgKmFiaV9yb3V0ZV9ib290c3RyYXAgKmFiaV9yb3V0ZV9zZW5kT25saW5lS2V5UmVnaXN0cmF0aW9uICphYmlfcm91dGVfc2VuZE9mZmxpbmVLZXlSZWdpc3RyYXRpb24gKmFiaV9yb3V0ZV9ub29wICphYmlfcm91dGVfZXhlYwoJZXJyCgoqY2FsbF9VcGRhdGVBcHBsaWNhdGlvbjoKCW1ldGhvZCAidXBkYXRlQXBwbGljYXRpb24oc3RyaW5nLHN0cmluZyl2b2lkIgoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAoJbWF0Y2ggKmFiaV9yb3V0ZV91cGRhdGVBcHBsaWNhdGlvbgoJZXJyCgoqY2FsbF9EZWxldGVBcHBsaWNhdGlvbjoKCW1ldGhvZCAiZGVsZXRlQXBwbGljYXRpb24oKXZvaWQiCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAwCgltYXRjaCAqYWJpX3JvdXRlX2RlbGV0ZUFwcGxpY2F0aW9uCgllcnI=",clear:"I3ByYWdtYSB2ZXJzaW9uIDEw"},contract:{name:"BiatecCronJob__SHORT_HASH__",desc:"",methods:[{name:"createApplication",desc:"Initial setup",args:[],returns:{type:"void"}},{name:"updateApplication",desc:"Creator can update application",args:[{name:"version",type:"string"},{name:"id",type:"string"}],returns:{type:"void"}},{name:"deleteApplication",desc:"Creator can delete application",args:[],returns:{type:"void"}},{name:"unregisterApplication",desc:"Creator can unregisterApplication before he deletes it",args:[{name:"appPoolManager",type:"uint64",desc:"Pool manager where the task is registered"},{name:"indexToDelete",type:"uint64",desc:"App index to delete from user's apps"}],returns:{type:"void"}},{name:"setPeriod",desc:"Creator can change the period how ofter the script can be executed by executors",args:[{name:"period",type:"uint64",desc:"Period in seconds"}],returns:{type:"void"}},{name:"payment",desc:"Creator can send pay/axfer transaction out of the smart contract",args:[{name:"amount",type:"uint64",desc:"Amount"},{name:"receiver",type:"address",desc:"Receiver"},{name:"note",type:"string",desc:"Note"}],returns:{type:"void"}},{name:"assetTransfer",desc:"Creator can send pay/axfer transaction out of the smart contract",args:[{name:"xferAsset",type:"uint64",desc:"Asset id"},{name:"assetAmount",type:"uint64",desc:"Amount"},{name:"assetReceiver",type:"address",desc:"Receiver"},{name:"note",type:"string",desc:"Note"}],returns:{type:"void"}},{name:"bootstrap",desc:"Bootstrap the contract to optin to the fee asset and setup basic variables",args:[{name:"appPoolManager",type:"uint64",desc:"Tasks Pool manager app"},{name:"txBaseDeposit",type:"pay",desc:"Deposit MBR"},{name:"id",type:"string",desc:"Hash id of the input app"},{name:"period",type:"uint64",desc:"Period in seconds how often this smart contract can be run"},{name:"start",type:"uint64",desc:"Start time in unix timestamp seconds. Contract can be exectuted when Math.floor((currentTime + start) / period)>Math.floor((lastRun + start) / period)"},{name:"fee",type:"uint64",desc:"Execution fee for the task"}],returns:{type:"void"}},{name:"sendOnlineKeyRegistration",desc:"Creator can perfom key registration for this LP pool",args:[{name:"votePk",type:"byte[]"},{name:"selectionPk",type:"byte[]"},{name:"stateProofPk",type:"byte[]"},{name:"voteFirst",type:"uint64"},{name:"voteLast",type:"uint64"},{name:"voteKeyDilution",type:"uint64"}],returns:{type:"void"}},{name:"sendOfflineKeyRegistration",desc:"Creator can perfom key unregistration for this LP pool",args:[],returns:{type:"void"}},{name:"noop",desc:"No op, for purpose of adding extra resources to the tx group",args:[],returns:{type:"void"}},{name:"exec",desc:"Anyone can execute this scheduler method when time is right and he will be rewarded the fee",args:[],returns:{type:"void"}}]}},V=class{static get create(){return{createApplication(e,t={}){return p({method:"createApplication()void",methodArgs:Array.isArray(e)?e:[]},t)}}}static get update(){return{updateApplication(e,t={}){return p({method:"updateApplication(string,string)void",methodArgs:Array.isArray(e)?e:[e.version,e.id]},t)}}}static get delete(){return{deleteApplication(e,t={}){return p({method:"deleteApplication()void",methodArgs:Array.isArray(e)?e:[]},t)}}}static unregisterApplication(e,t){return p({method:"unregisterApplication(uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.appPoolManager,e.indexToDelete]},t)}static setPeriod(e,t){return p({method:"setPeriod(uint64)void",methodArgs:Array.isArray(e)?e:[e.period]},t)}static payment(e,t){return p({method:"payment(uint64,address,string)void",methodArgs:Array.isArray(e)?e:[e.amount,e.receiver,e.note]},t)}static assetTransfer(e,t){return p({method:"assetTransfer(uint64,uint64,address,string)void",methodArgs:Array.isArray(e)?e:[e.xferAsset,e.assetAmount,e.assetReceiver,e.note]},t)}static bootstrap(e,t){return p({method:"bootstrap(uint64,pay,string,uint64,uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.appPoolManager,e.txBaseDeposit,e.id,e.period,e.start,e.fee]},t)}static sendOnlineKeyRegistration(e,t){return p({method:"sendOnlineKeyRegistration(byte[],byte[],byte[],uint64,uint64,uint64)void",methodArgs:Array.isArray(e)?e:[e.votePk,e.selectionPk,e.stateProofPk,e.voteFirst,e.voteLast,e.voteKeyDilution]},t)}static sendOfflineKeyRegistration(e,t){return p({method:"sendOfflineKeyRegistration()void",methodArgs:Array.isArray(e)?e:[]},t)}static noop(e,t){return p({method:"noop()void",methodArgs:Array.isArray(e)?e:[]},t)}static exec(e,t){return p({method:"exec()void",methodArgs:Array.isArray(e)?e:[]},t)}},B=class e{constructor(e,t){this.algod=t,this.sender=e.sender,this.appClient=o.eC(u(p({},e),{app:Y}),t)}mapReturnValue(e,t){var a,n,o;if(null==(a=e.return)?void 0:a.decodeError)throw e.return.decodeError;const l=void 0!==(null==(n=e.return)?void 0:n.returnValue)&&void 0!==t?t(e.return.returnValue):null==(o=e.return)?void 0:o.returnValue;return u(p({},e),{return:l})}call(e,t){return m(this,null,(function*(){return this.mapReturnValue(yield this.appClient.call(e),t)}))}deploy(e={}){var t,a,n;const o=null==(t=e.createCall)?void 0:t.call(e,V.create),l=null==(a=e.updateCall)?void 0:a.call(e,V.update),c=null==(n=e.deleteCall)?void 0:n.call(e,V.delete);return this.appClient.deploy(u(p({},e),{updateArgs:l,deleteArgs:c,createArgs:o,createOnCompleteAction:null==o?void 0:o.onCompleteAction}))}get create(){const e=this;return{createApplication(t){return m(this,arguments,(function*(t,a={}){return e.mapReturnValue(yield e.appClient.create(V.create.createApplication(t,a)))}))}}}get update(){const e=this;return{updateApplication(t){return m(this,arguments,(function*(t,a={}){return e.mapReturnValue(yield e.appClient.update(V.update.updateApplication(t,a)))}))}}}get delete(){const e=this;return{deleteApplication(t){return m(this,arguments,(function*(t,a={}){return e.mapReturnValue(yield e.appClient.delete(V.delete.deleteApplication(t,a)))}))}}}clearState(e={}){return this.appClient.clearState(e)}unregisterApplication(e,t={}){return this.call(V.unregisterApplication(e,t))}setPeriod(e,t={}){return this.call(V.setPeriod(e,t))}payment(e,t={}){return this.call(V.payment(e,t))}assetTransfer(e,t={}){return this.call(V.assetTransfer(e,t))}bootstrap(e,t={}){return this.call(V.bootstrap(e,t))}sendOnlineKeyRegistration(e,t={}){return this.call(V.sendOnlineKeyRegistration(e,t))}sendOfflineKeyRegistration(e,t={}){return this.call(V.sendOfflineKeyRegistration(e,t))}noop(e,t={}){return this.call(V.noop(e,t))}exec(e,t={}){return this.call(V.exec(e,t))}static getBinaryState(e,t){const a=e[t];if(a){if(!("valueRaw"in a))throw new Error(`Failed to parse state value for ${t}; received an int when expected a byte array`);return{asString(){return a.value},asByteArray(){return a.valueRaw}}}}static getIntegerState(e,t){const a=e[t];if(a){if("valueRaw"in a)throw new Error(`Failed to parse state value for ${t}; received a byte array when expected a number`);return{asBigInt(){return"bigint"===typeof a.value?a.value:BigInt(a.value)},asNumber(){return"bigint"===typeof a.value?Number(a.value):a.value}}}}getGlobalState(){return m(this,null,(function*(){const t=yield this.appClient.getGlobalState();return{get id(){return e.getBinaryState(t,"id")},get l(){return e.getIntegerState(t,"l")},get p(){return e.getIntegerState(t,"p")},get s(){return e.getIntegerState(t,"s")},get pool(){return e.getIntegerState(t,"pool")},get scver(){return e.getBinaryState(t,"scver")}}}))}compose(){const e=this,t=new n.AtomicTransactionComposer;let a=Promise.resolve();const l=[];return{unregisterApplication(n,o){return a=a.then((()=>e.unregisterApplication(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},setPeriod(n,o){return a=a.then((()=>e.setPeriod(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},payment(n,o){return a=a.then((()=>e.payment(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},assetTransfer(n,o){return a=a.then((()=>e.assetTransfer(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},bootstrap(n,o){return a=a.then((()=>e.bootstrap(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},sendOnlineKeyRegistration(n,o){return a=a.then((()=>e.sendOnlineKeyRegistration(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},sendOfflineKeyRegistration(n,o){return a=a.then((()=>e.sendOfflineKeyRegistration(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},noop(n,o){return a=a.then((()=>e.noop(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},exec(n,o){return a=a.then((()=>e.exec(n,u(p({},o),{sendParams:u(p({},null==o?void 0:o.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},get update(){const n=this;return{updateApplication(o,c){return a=a.then((()=>e.update.updateApplication(o,u(p({},c),{sendParams:u(p({},null==c?void 0:c.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),n}}},get delete(){const n=this;return{deleteApplication(o,c){return a=a.then((()=>e.delete.deleteApplication(o,u(p({},c),{sendParams:u(p({},null==c?void 0:c.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),n}}},clearState(n){return a=a.then((()=>e.clearState(u(p({},n),{sendParams:u(p({},null==n?void 0:n.sendParams),{skipSending:!0,atc:t})})))),l.push(void 0),this},addTransaction(n,l){return a=a.then((()=>m(this,null,(function*(){return t.addTransaction(yield o.OO(n,null!=l?l:e.sender))})))),this},atc(){return m(this,null,(function*(){return yield a,t}))},simulate(o){return m(this,null,(function*(){var c;yield a;const r=yield t.simulate(e.algod,new n.modelsv2.SimulateRequest(p({txnGroups:[]},o)));return u(p({},r),{returns:null==(c=r.methodResults)?void 0:c.map(((e,t)=>void 0!==l[t]?l[t](e.returnValue):e.returnValue))})}))},execute(n){return m(this,null,(function*(){var c;yield a;const r=yield o.Ix({atc:t,sendParams:n},e.algod);return u(p({},r),{returns:null==(c=r.returns)?void 0:c.map(((e,t)=>void 0!==l[t]?l[t](e.returnValue):e.returnValue))})}))}}}}}}]);
//# sourceMappingURL=548.bc1517a3.js.map